AC 800M
Communication Protocols
 

System Version 5.1

 

Power and productivity
for a better worldTM

AC 800M
Communication Protocols

System Version 5.1

NOTICE

This document contains information about one or more ABB products and may include a
description of or a reference to one or more standards that may be generally relevant to
the ABB products. The presence of any such description of a standard or reference to a
standard is not a representation that all of the ABB products referenced in this document
support all of the features of the described or referenced standard. In order to determine
the specific features supported by a particular ABB product, the reader should consult the
product specifications for the particular ABB product.

ABB may have one or more patents or pending patent applications protecting the intel-
lectual property in the ABB products described in this document.

The information in this document is subject to change without notice and should not be
construed as a commitment by ABB. ABB assumes no responsibility for any errors that
may appear in this document.

In no event shall ABB be liable for direct, indirect, special, incidental or consequential
damages of any nature or kind arising from the use of this document, nor shall ABB be
liable for incidental or consequential damages arising from use of any software or hard-
ware described in this document.

 

This document and parts thereof must not be reproduced or copied without written per-
mission from ABB, and the contents thereof must not be imparted to a third party nor used
for any unauthorized purpose.

The software or hardware described in this document is furnished under a license and
may be used, copied, or disclosed only in accordance with the terms of such license. This
product meets the requirements specified in EMC Directive 2004/108/EEC and in Low
Voltage Directive 2006/95/EEC.

TRADEMARKS

All rights to copyrights, registered trademarks, and trademarks reside with their respec-
tive owners.

Copyright  2003-2010 by ABB. 
All rights reserved.

Release:June 2010
Document number:3BSE035982-510

TABLE OF CONTENTS

About This Book
General ............................................................................................................................15
Document Conventions ...................................................................................................16
Warning, Caution, Information, and Tip Icons................................................................16
Terminology.....................................................................................................................17
Related Documentation ...................................................................................................17

 

Section 1  Introduction
Product Overview ............................................................................................................19
Product Scope.......................................................................................................19
Network Communication .....................................................................................19
ABB I/O Systems.................................................................................................21
Protocols and Controllers Supported by Control Builder ....................................22
Properties of Different Protocols..........................................................................23
Peer-to-Peer Communication Between AC 800M Controllers ............................25
Methods of Access to Other Controller Systems .................................................27
Clock Synchronization .........................................................................................28

Section 2  MMS
Introduction .....................................................................................................................31
Services Provided.................................................................................................32
MMS Server .........................................................................................................32
Design..............................................................................................................................33
Configuration Parameters.....................................................................................33
Network Areas......................................................................................................34
Explicit and Implicit Addressing .........................................................................36

3BSE035982-510

5

  

MMS on RS-232C (PPP)..................................................................................... 36
Separation of Plant Intranet, Client/Server and Control Network ....................... 40
Hardware ......................................................................................................................... 41
Redundancy..................................................................................................................... 41
CPU Redundancy................................................................................................. 41
Performance .................................................................................................................... 43
Limitations ...................................................................................................................... 45
Advanced......................................................................................................................... 46
Default Gateway .................................................................................................. 46
Default Process Number ...................................................................................... 47
Troubleshooting............................................................................................................... 48

Section 3  IAC
Introduction ..................................................................................................................... 49
Characteristics of Communication Variables....................................................... 49
Services Provided................................................................................................. 50
Design ............................................................................................................................. 51
Redundancy..................................................................................................................... 52
Performance .................................................................................................................... 53
Limitations ...................................................................................................................... 54
Troubleshooting............................................................................................................... 55

 

Section 4  MasterBus 300
Introduction ..................................................................................................................... 57
Services Provided................................................................................................. 57
Design ............................................................................................................................. 58
Introduction.......................................................................................................... 58
Design Example................................................................................................... 58
Communication Function Blocks ........................................................................ 59
Redundancy..................................................................................................................... 61
Limitations ...................................................................................................................... 61
Performance .................................................................................................................... 61
Hardware ......................................................................................................................... 61

6

3BSE035982-510

  

Advanced .........................................................................................................................62
Troubleshooting...............................................................................................................62

Section 5  COMLI
Introduction .....................................................................................................................63
Services Provided.................................................................................................63
Design..............................................................................................................................64
Introduction ..........................................................................................................64
Design Examples..................................................................................................64
Redundancy .....................................................................................................................66
Limitations.......................................................................................................................66
Performance.....................................................................................................................67
Hardware .........................................................................................................................68
Advanced .........................................................................................................................68
Procedure for Linking Control Systems with COMLI.........................................68

Section 6  SattBus on TCP/IP
Introduction .....................................................................................................................69
Services Provided.................................................................................................69
Design..............................................................................................................................70
Introduction ..........................................................................................................70
Redundancy .....................................................................................................................70
Limitations.......................................................................................................................70
Performance.....................................................................................................................71
Advanced .........................................................................................................................71

 

Section 7  INSUM
Introduction .....................................................................................................................73
Services Provided.................................................................................................74
Design..............................................................................................................................74
Introduction ..........................................................................................................74
Design Example ...................................................................................................75
Redundancy .....................................................................................................................77

3BSE035982-510

7

  

Limitations ...................................................................................................................... 77
Performance .................................................................................................................... 77
Hardware ......................................................................................................................... 78
Troubleshooting............................................................................................................... 78

Section 8  Siemens 3964R
Introduction ..................................................................................................................... 79
Services Provided................................................................................................. 79
Design ............................................................................................................................. 80
Introduction.......................................................................................................... 80
Limitations ...................................................................................................................... 81
Performance .................................................................................................................... 81
Hardware ......................................................................................................................... 81
Advanced......................................................................................................................... 82
Communicating Integers...................................................................................... 82
Communicating Bits ............................................................................................ 83

Section 9  MODBUS RTU
Introduction ..................................................................................................................... 85
Services Provided................................................................................................. 85
Design ............................................................................................................................. 86
Introduction.......................................................................................................... 86
Design Examples ................................................................................................. 86
Hardware ......................................................................................................................... 88
Performance .................................................................................................................... 88
Limitations ...................................................................................................................... 88
Redundancy..................................................................................................................... 88
Troubleshooting............................................................................................................... 88

 

Section 10  MODBUS TCP
Introduction ..................................................................................................................... 89
Services Provided................................................................................................. 89
Design ............................................................................................................................. 90

8

3BSE035982-510

  

Introduction ..........................................................................................................90
Design Examples..................................................................................................91
Connection Methods ............................................................................................93
Connection of MODBUS RTU MODBUS Devices ............................................93
Redundancy .....................................................................................................................93
Online Upgrade ...............................................................................................................95
Limitations.......................................................................................................................95
Performance.....................................................................................................................96
Hardware .........................................................................................................................97
Troubleshooting...............................................................................................................97

Section 11  AF 100
Introduction .....................................................................................................................99
Services Provided...............................................................................................100
Design............................................................................................................................100
Process Data Transfer.........................................................................................103
Message Transfer ...............................................................................................104
Bus Master Function ..........................................................................................104
Network Configuration ......................................................................................105
Online Upgrade .............................................................................................................106
Hardware .......................................................................................................................106
Troubleshooting.............................................................................................................106

 

Section 12  MOD5-to-MOD5

Introduction ........................................................................................................107
Services Provided...............................................................................................107
Design............................................................................................................................108
Connection Examples.........................................................................................109
Configuration Considerations........................................................................................110
Module Redundancy......................................................................................................112
Online Upgrade .............................................................................................................114
Troubleshooting.............................................................................................................115

3BSE035982-510

9

  

Section 13  EtherNet/IP and DeviceNet
Introduction ................................................................................................................... 117
Services Provided............................................................................................... 117
Design ........................................................................................................................... 118
Design Example................................................................................................. 119
Limitations .................................................................................................................... 119
Performance .................................................................................................................. 120

Section 14  IEC 61850
Introduction ................................................................................................................... 121
Services Provided............................................................................................... 121
Design ........................................................................................................................... 122
Introduction........................................................................................................ 122
Design Examples ............................................................................................... 123
Connection Methods .......................................................................................... 124
Redundancy................................................................................................................... 124
Module Redundancy by IEC 61131 Application Logic .................................... 124
Online Upgrade ............................................................................................................. 125
Limitations .................................................................................................................... 125
Capacity of IEC 61850 solution using CI868.................................................... 125
Performance Limitations of CI868 .................................................................... 126
Performance .................................................................................................................. 127
Hardware ....................................................................................................................... 128
Troubleshooting............................................................................................................. 128

 

Section 15  Self-defined Serial Communication
Introduction ................................................................................................................... 129
Design ........................................................................................................................... 129
Hardware ....................................................................................................................... 130
Performance .................................................................................................................. 130
Limitations .................................................................................................................... 130
Redundancy................................................................................................................... 131
Advanced....................................................................................................................... 131

10

3BSE035982-510

  

Troubleshooting.............................................................................................................132

Section 16  FOUNDATION Fieldbus HSE
Introduction ...................................................................................................................133
Advantages .........................................................................................................133
Design............................................................................................................................134
Introduction ........................................................................................................134
Design Example .................................................................................................135
Connection Methods ..........................................................................................136
Redundancy ...................................................................................................................137
Limitations and Performance ........................................................................................137
General
...........................................................................................................137
Dimensioning Limits, Linking Device...............................................................137
Dimensioning Limits, FOUNDATION Fieldbus HSE Communication Interface 

Module CI860 ...................................................................................138
Hardware .......................................................................................................................139
Advanced .......................................................................................................................139
Troubleshooting.............................................................................................................140

 

Section 17  DriveBus
Introduction ...................................................................................................................141
Services Provided...............................................................................................141
Advantages ....................................................................................................................141
Design............................................................................................................................142
Design Example .................................................................................................142
Dataset Communication .....................................................................................143
Configuration .....................................................................................................144
Redundancy ...................................................................................................................144
Limitations.....................................................................................................................145
Performance...................................................................................................................145
Hardware .......................................................................................................................146
Advanced .......................................................................................................................146

3BSE035982-510

11

  

Section 18  PROFIBUS DP
Introduction ................................................................................................................... 147
Services Provided............................................................................................... 148
Advantages......................................................................................................... 148
Design ........................................................................................................................... 148
Introduction........................................................................................................ 148
Design Example................................................................................................. 149
Redundancy................................................................................................................... 150
Limitations .................................................................................................................... 150
Performance .................................................................................................................. 150
Hardware ....................................................................................................................... 151
Advanced....................................................................................................................... 151
Troubleshooting............................................................................................................. 151
CI854 Web Interface ..................................................................................................... 152

Section 19  PROFINET IO
Introduction ................................................................................................................... 153
Services Provided............................................................................................... 154
Advantages......................................................................................................... 154
Design ........................................................................................................................... 155
Introduction........................................................................................................ 155
Design Examples ............................................................................................... 156
Redundancy................................................................................................................... 156
Online Upgrade ............................................................................................................. 157
Technical Data............................................................................................................... 157
Hardware ....................................................................................................................... 158
Troubleshooting............................................................................................................. 158
CI871 Web Interface ..................................................................................................... 158

 

Section 20  Modem Communication
Introduction ................................................................................................................... 159
Short Distance Modem.................................................................................................. 159
Dial-Up Modem ............................................................................................................ 160

12

3BSE035982-510

  

Limitations.....................................................................................................................162
Performance...................................................................................................................162
Troubleshooting.............................................................................................................162

Appendix A  OSI Profile for MMS
MMS Services ...............................................................................................................163
Reduced OSI Implementation .......................................................................................165

Appendix B  Used Port Numbers
Used Ports......................................................................................................................167

Appendix C  Configuration of HART Devices
Introduction ...................................................................................................................169
Configuration Example..................................................................................................170
Toolrouting ....................................................................................................................171

Appendix D  PROFIBUS PA
PROFIBUS PA ..............................................................................................................173

 

Appendix E  ABB Drives
Introduction ...................................................................................................................175
Types of ABB Drives.....................................................................................................176
ABB Standard Drives ........................................................................................176
ABB Engineered Drives ....................................................................................176
Parameter Group Configuration ....................................................................................177

INDEX

3BSE035982-510

13

  

 

14

3BSE035982-510

About This Book

General

This guide describes criteria for selecting networks and communication protocols 
and is intended for engineers who are planning the design of a new network or the 
expansion of an existing one. Note, however, that pictures of devices are for 
illustrative purposes only. Refer to the relevant hardware users guides for 
information on how to connect cables.

 

The described functions may contain some restrictions that are specific to the 
release. Please refer to the latest product guides and release notes regarding possible 
restrictions.

It is recommended to use Control Network. This uses the MMS protocol with 
Ethernet and/or RS-232C as physical media. However, with regard to existing 
equipment or other circumstances other protocols and fieldbuses are also discussed. 
MB 300, COMLI, Siemens 3964R, MODBUS RTU, MODBUS TCP, 
MOD5-to-MOD5, and SattBus are standard protocols for general data 
communication between controllers. FOUNDATION Fieldbus, PROFIBUS DP, 
PROFINET IO, DriveBus, INSUM, AF 100, EtherNet/IP and DeviceNet, and 
IEC 61850 are dedicated to I/O communication.

For detailed information on the use of the programming tool Control Builder 
Professional, refer to the online help and the System 800xA Control, AC 800M, 
Configuration (3BSE035980*) manual. 

Section 1, Introduction, presents an overview of communication protocols 
supported by Control Builder, and the main criteria for selection.

The remaining sections describe the MMS protocol and other communication 
protocols supported, and well as modem communication. The appendices deal with 
the OSI profile for MMS, HART devices, PROFIBUS PA, and ABB Drives.

3BSE035982-510

15

Document Conventions

  About This Book

Document Conventions

Microsoft Windows conventions are normally used for the standard presentation of 
material when entering text, key sequences, prompts, messages, menu items, screen 
elements, etc.

Warning, Caution, Information, and Tip Icons

This publication includes Warning, Caution, and Information where appropriate 
to point out safety related or other important information. It also includes Tip to 
point out useful hints to the reader. The corresponding symbols should be 
interpreted as follows:

Electrical warning icon indicates the presence of a hazard which could result in 
electrical shock.

 

Warning icon indicates the presence of a hazard which could result in personal 
injury.

Caution icon indicates important information or warning related to the concept 
discussed in the text. It might indicate the presence of a hazard which could 
result in corruption of software or damage to equipment/property.

Information icon alerts the reader to pertinent facts and conditions.

Tip icon indicates advice on, for example, how to design your project or how to 
use a certain function

Although Warning hazards are related to personal injury, and Caution hazards are 
associated with equipment or property damage, it should be understood that 
operation of damaged equipment could, under certain operational conditions, result 
in degraded process performance leading to personal injury or death. Therefore, 
fully comply with all Warning and Caution notices.

16

3BSE035982-510

  About This Book

Terminology

Terminology

A complete and comprehensive list of Terms is included in the System 800xA, 
Engineering Concepts (3BDS100972*) instruction. The listing included in 
Engineering Concepts includes terms and definitions that apply to the 800xA 
system where the usage is different from commonly accepted industry standard 
definitions and definitions given in standard dictionaries such as Websters 
Dictionary of Computer Terms. 

Related Documentation

A complete list of all documents applicable to the 800xA IndustrialIT Extended 
Automation System is provided in Released User Documents, 3BUA000263*. 
This document lists applicable Release Notes and User Instructions. It is provided in 
PDF format and is included on the Release Notes/Documentation media provided 
with your system. Released User Documents are updated with each release and a 
new file is provided that contains all user documents applicable for that release with 
their applicable document number. Whenever a reference to a specific instruction is 
made, the instruction number is included in the reference.

 

3BSE035982-510

17

Related Documentation

  About This Book

 

18

3BSE035982-510

Section 1  Introduction

Product Overview

Product Scope

The products described are utilized for general network communication of real-time 
data between controllers and computers in an industrial environment.

Network Communication

 

It is recommended to use Control Network which is a private IP network domain 
especially designed for industrial applications. This means that all communication 
handling will be the same, regardless of network type or connected devices. Control 
Network is scalable from a very small network with a few nodes to a large network 
containing a number of network areas with hundreds of addressable nodes (there 
may be other restrictions such as controller performance). 
Control Network uses the MMS communication protocol on Ethernet and/or 
RS-232C to link workstations to controllers. MMS (Manufacturing Message 
Specification) is an ISO 9506 standard. In order to support Control Network on RS-
232C links, the Point-to-Point Protocol (PPP) is used. The Redundant Network 
Routing Protocol (RNRP) developed by ABB handles alternative paths between 
nodes and automatically adapts to topology changes. MMS is described in Section 
2, MMS.

In addition, other protocols such as MB 300, COMLI, Siemens 3964R, MODBUS 
RTU, MODBUS TCP, SattBus, and MOD5-to-MOD5 can be used. Fieldbuses such 
as FOUNDATION Fieldbus HSE, PROFIBUS DP (according to IEC 1158-2 and 
EN 50170), PROFINET IO, DriveBus, INSUM, IEC 61850, Advant Fieldbus 100 
(AF 100), and EtherNet/IP and DeviceNet can be connected to the network via 
communication interface units.

3BSE035982-510

19

Network Communication

Section 1  Introduction

Table 1 Table 4 give concise information to be used when selecting protocols.

The Control Network, as well as other protocols and fieldbuses, is configured by 
means of the project explorer in Control Builder (see Figure 1). The Control 
Network is specified by settings in the parameter lists, accessed by right-clicking 
the symbols for the CPUs and the Ethernet and/or PPP symbols (see Section 2, 
MMS for further information). Hardware configuration is explained in the Control 
Builder online help. PC nodes are specified in the PC setup wizard.

 

Figure 1. Project Explorer

20

3BSE035982-510

Section 1  Introduction

ABB I/O Systems

ABB I/O Systems

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

S100 I/O is connected to AC 800M via CI856.

S200 I/O is connected to AC 800M via CI851, CI854 and CI865. Please refer 
to the manual S200 I/O Hardware, Hardware and Installation, User's Guide 
(3BSE021356*) for more information.

S800 I/O is connected to AC 800M via modulebus, CI851 and CI854. Please 
refer to the manual S800 I/O - General Information and Installation - User s 
Guide (3BSE020923*) for more information.

S900 I/O via CI851 and CI854.

TRIO is connected to AC 800M via CI862. Please refer to the manual 800xA 
for TRIO/Genius - Introduction and Installation (3BUR002459*) for more 
information.

Satt 19 Rack I/O is connected to AC 800M via CI865. Please refer to the 
manual Satt I/O Interface for AC 800M (3BSE042821*) for more information.

 

3BSE035982-510

21

Protocols and Controllers Supported by Control Builder

Section 1  Introduction

Protocols and Controllers Supported by Control Builder

Table 1 lists controllers and protocols supported by the current version of 
Control Builder.

Table 1. Protocols and Controllers supported by Control Builder.

Protocol

AC 800M AC 800M HI

IAC

MMS on Ethernet

MMS on RS-232C (PPP)

MasterBus 300

SattBus on TCP/IP
COMLI(1)
Siemens 3964R(2)
MODBUS RTU(3)
MODBUS TCP(4)

 

FOUNDATION Fieldbus HSE

PROFIBUS DP

PROFINET IO

DriveBus

INSUM

IEC 61850

MOD5-to-MOD5

AF 100

EtherNet/IP and DeviceNet

(1) Both master and slave
(2) Master only
(3) Master only
(4) Both master and slave

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

YES

NO

YES

YES

YES

YES

YES

YES

YES

YES

NO

YES

NO

NO

YES

YES

YES

NO

NO

22

3BSE035982-510

Section 1  Introduction

Properties of Different Protocols

Properties of Different Protocols

Table 2 shows access modes used, variable types handled and maximum message 
size permitted for various protocols, as well as which protocols that require 
interface units with separate CPUs, and protocols that support dial-up modems.

Table 2. Properties of the different protocols.

Protocol

Access 
method

r
o
f
 

U
P
C
 
e
t
a
r
a
p
e
S

n
o
i
t
a
c
i
n
u
m
m
o
c

m
e
d
o
m
p
u
-
l
a
i
D

 

 

Ethernet

Ethernet

 

Point-to-
point

Variable types(1)

n
a
e
l
o
o
B

r
e
g
e
t
n

I

g
n
i
r
t

S

d
r
o
W

l
a
e
R

)
2
(

t
c
u
r
t

S

    x 

    x 

    x 

e
g
a
s
s
e
m

 
r
e
p
 
s
e
t
y
b

f
o
 
r
e
b
m
u
n

 
.
x
a
M

r
o
 
s
r
e
t
s
i
g
e
r
/
s
t
i
b
(3)

(3)

(3)

Ethernet



  

Ethernet

   



31 bytes

IAC MMS

MMS on 
Ethernet

MMS on RS-
232C (PPP)

MasterBus 
300

SattBus on 
TCP/IP

COMLI

Siemens 
3964R

Multidrop

Point-to-
point

  

 

 

MODBUS RTU Multidrop

MODBUS TCP Ethernet

x

  x

512/32

512/32

1968/123

1968/123

Self-defined 
in Serial 
Communicati
on Library

Point-to-
point

    x  140 bytes

IEC 61850

Ethernet

x

  x

3BSE035982-510

23

Properties of Different Protocols

Section 1  Introduction

Protocol

Access 
method

MOD5-to-
MOD5

AF 100

Fiber Optic

Twisted 
Pair

RS-485

PROFIBUS 
DP
PROFINET IO Ethernet

EtherNet/IP

Ethernet

x

 

x

m
e
d
o
m
p
u
-
l
a
i
D

 

 

r
o
f
 

U
P
C
 
e
t
a
r
a
p
e
S

i

n
o
i
t
a
c
n
u
m
m
o
c

x

x

x

Variable types(1)

n
a
e
l
o
o
B

r
e
g
e
t
n

I

g
n
i
r
t

S

d
r
o
W

l
a
e
R

)
2
(

t
c
u
r
t

S

x

x

x

x

x

x

x

x

x

x

x

x

x

x

x

x

x

x

e
g
a
s
s
e
m

 
r
e
p
 
s
e
t
y
b

f
o
 
r
e
b
m
u
n

 
.
x
a
M

 

r
o
s
r
e
t
s
i
g
e
r
/
s
t
i
b

417 bytes

32 bytes

244 bytes

1440 
bytes

508 bytes

(1) When transferring variables it is important to use data types having the same range 
on both client and server. However, a dInt variable on the server can be connected 
to an Int variable on the client if the values are within the Int variable's range

(2) MMS and SattBus can transfer structured variables of the data types given in the 

table. No protocol can transfer variables of types ArrayObject or QueueObject.

(3) See Table 5 on page 44.

24

3BSE035982-510

Section 1  Introduction

Peer-to-Peer Communication Between AC 800M Controllers

Peer-to-Peer Communication Between AC 800M Controllers

Table 3 provides details on the protocols supported by AC 800M which can be used 
for peer-to-peer communication between controllers.:

Table 3. Summary of characteristics

Protocol

Determinism

Redundancy

(4-byte values per 

Throughput 

IAC MMS on the 
Control Network

Delay at Transmission and 
reception depends on CPU load

MMS on the 
Control Network

Delay at Transmission and 
reception depends on CPU load

MB 300 

FF HSE 

Delay at Transmission and 
reception depends on CPU load. 
Supervision of transmission rate

Transmission and reception 
independent of CPU load

 

Network
(RNRP)

Network
(RNRP)

Network

second)

Server: 4000..13200
Client: 5700..19800

2400 (per CI855)

CI Module

660 (per CI860)

MODBUS TCP

Transmission and reception 
independent of CPU load

CI Module

80 (per CI867)

MOD5-to-MOD5

Transmission and reception 
independent of CPU load.

CI Module + 
Network

One remote MOD5 
controller transmits 
100 variables and 
receives 100 
variables every 
second.

PROFIBUS DP(1) Transmission and reception 

independent of CPU load

CI Module + 
Network

75000 with 
12Mbits/sec

PROFINET IO(1)

Transmission and reception 
independent of CPU load

CI Module of 
Application Logic

Maximum of 360.000 
signals in.
Maximum of 360.000 
signals out.

3BSE035982-510

25

Peer-to-Peer Communication Between AC 800M Controllers

Section 1  Introduction

Table 3. Summary of characteristics

Protocol

Determinism

Redundancy

(4-byte values per 

Throughput 

IEC 61850

Transmission and reception 
independent of CPU load

CI Module of 
Application Logic

AF 100

Transmission and reception 
independent of CPU load

 

CI Module + 
Network

(1) When used with external coupler.

second)

Receive:
22500, with 150 
analog data 
attributes within each 
of the 150 datasets 
(maximum possible).
Send:
9000, with 150 
analog data 
attributes within each 
of the 60 datasets 
(maximum possible).

24000, if 32 byte 
CDPs are used.
8000, if 4 byte CDPs 
are used.
A mix of 4, 8, 16 and 
32 byte CDPs gives 
a throughput 
between 8000 and 
24000 4-byte data 
per second.

26

3BSE035982-510

Section 1  Introduction

Methods of Access to Other Controller Systems

Methods of Access to Other Controller Systems

The Table 4 indicates protocols that can be used for communication between 
AC 800M and other legacy controllers by ABB.

Table 4. Methods of access to legacy controllers.

Protocol

MB 300

SattBus 

on 

TCP/IP

COMLI(1)

Siemens 
3964R

MOD
-BUS

Self-def. 
in Serial
Comm. 
Library

MMS AF 100

SattLine 200

AC 210

AC 250 with
ACB ver. 1

AC 250 with
CB 2 or later

AC 800C

MP 200/1

AC 55

AC 70



AC 110, 160

AC 410, 450



SattCon05

SattCon15, 31, 
35, 60, 115, 125

SattCon200





















 

(3)





(5)





x(2)





x

x

x

























(4)







(1) Supported message types differ between the controllers; refer to the relevant programmers manuals.
(2) Support in SattLine CPU50 v2.3 or later, and SattLine Workstation v2.3 or later.
(3) From version MP 200/1, version 4.0.
(4) From version MP 200/1, version 2.1.
(5) With control board CU05-25, CU05-45 or CU05-65.

3BSE035982-510

27

Clock Synchronization

Section 1  Introduction

Clock Synchronization

AC 800M supports clock synchronization by four different protocols: CNCP, 
SNTP, MB 300 Clock Sync, and MMS Time Service. In addition to these, AC 800M 
also supports the protocol type SNTP on CI for clock sychronization using 
communication interfaces (CI) that independently function as time master or time 
slave. 

The protocol to be used for receiving time is chosen in the Hardware Editor of the 
Control Builder.

AC 800M can send clock synchronization with all protocols simultaneously, but it 
uses one configured protocol (by the parameter CS protocol type) to receive clock 
synchronization from another source. Advantage of AC 800M is that it can receive 
time with a protocol and distributes to other nodes with another protocol, and acts as 
a router.

CNCP is the normal protocol for clock synchronization on the Control Network. An 
AC 800M controller selected as Clock Master (i.e. with Clock Master Order No>0) 
multicasts synchronization messages on the network (see Figure 2). All nodes that 
are configured to receive time with CNCP (CS protocol type = CNCP) is 
synchronized from the Clock Master.

 

SNTP is a standardized protocol used by AC 800M controllers that need to be 
synchronized from an external time server which is connected to the Control 
Network. Set CS protocol type = SNTP to configure AC 800M to be an SNTP 
client. As SNTP is a simplified version of NTP, both NTP and SNTP servers can be 
used.

To get a good clock accuracy in the AC 800M, an (S)NTP server with high 
precision should be used. The SNTP server is typically synchronized via a GPS 
receiver. An SNTP server can typically handle many SNTP clients that receive 
clock synchronization through GPS. Therefore, all controllers on a control network 
can use SNTP to be synchronized from the same SNTP server. AC 800M contains 
an SNTP server that always is enabled. It can be used by other units that need to be 
synchronized if no external NTP server is used. CNCP and SNTP can both operate 
at the same time on the network.

SNTP on CI is a protocol that is used by AC 800M controllers, which have 
communication interfaces that can handle clock synchronization independently (for 
example, the CI869 that communicates with AF 100). 

28

3BSE035982-510

Section 1  Introduction

Clock Synchronization

Set CS protocol type = SNTP on CI to configure the CI (which is connected 
to AC 800M) to be an SNTP client. These communication interfaces have separate 
clock synchronization setting (Master/Slave). 

The OPC server for the AC 800M supports the MMS Time Service for small 
systems where no AC 800M is used for backward compatibility with older products.

MB 300 Clock Sync is a protocol for clock synchronization of Advant/Master 
products on a MasterBus 300 network. AC 800M can receive its synchronization 
via CI855 (CS protocol type = MB300).

CI855 can act as Clock Sync master on MB 300 (CI855 Parameter Time Sync 
= MB300 Master)

For more details on Clock Synchronization refer to 3BSE03446*, Automation 
System Network: Design and Configuration.

Clock Synchronization

 

CNCP w.
medium accuracy

Control Network

AC 400 Series

CNCP*)

AC 800M

AC 800M Connectivity Server

SNTP

High 

Precision 
(S)NTP 
server

CNCP

AC 800M

MB 300 TS

MasterBus 300

Figure 2. Clock Synchronization

*) The direction depends on which controller 
is the master (the left AC 800M or AC 400).

3BSE035982-510

29

Clock Synchronization

Section 1  Introduction

Intermediate Clock Master

AC 800M can act as intermediate clock master. This means that it relays time 
synchronization between two Network Areas with CNCP. To do this, it shall have a 
Clock Master order number that is at least two numbers higher than any ordinary 
Clock Master on the network area with the time source.

The standard and recommended synchronization interval is 20 seconds.

 

Figure 3. Intermediate Clock Master - Configuration

30

3BSE035982-510

Section 2  MMS

Introduction

Control Network uses the MMS protocol and a reduced Open Systems 
Interconnection (OSI) stack with the TCP/IP protocol in the transport/network 
layer, and Ethernet and/or RS-232C as physical media. MMS (Manufacturing 
Message Specification) is an ISO 9506 standard developed for industrial 
applications. The protocol defines communication messages transferred between 
controllers as well as between the engineering station (such as Control Builder) and 
the controller (e.g. downloading an application or reading/writing variables). It has 
been developed especially for industrial applications. See also Appendix A, OSI 
Profile for MMS.

 

Engineering stations

Controllers

Figure 4. The MMS protocol defines communication messages transferred between 
controllers as well as between engineering stations and controllers.

3BSE035982-510

31

Services Provided

Section 2  MMS

Services Provided

The MMS protocol provides several services1 within a network:
(cid:129)

Downloading an application, e.g. executable code and data from an 
engineering station (such as Control Builder) to a controller.

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Creating, deleting, starting, and stopping programs over the network.

Reading and writing variables located in other systems on the network.

Obtaining information about applications being executed and about error 
conditions in remote systems.

Reading and writing files over the network.

Handling alarm conditions.

Obtaining information on remote system capability, model identification and 
revision of remote systems.

Support of Safe peer-to-peer. For more information please refer to 
Communication Handling in Control Builder online help.

 

Main advantages:

The MMS protocol is an ISO 9506 standard protocol, which means all 
communication handling will be the same, regardless of network type and 
connected devices.

The protocol can be used on many different networks, but preferably on the 
TCP/IP network, which is the most commonly used network today. ABB only 
uses MMS on the TCP/IP network.

(cid:129)

(cid:129)

MMS Server

The function of the MMS Server resembles a multiplexer between Control Builder, 
OPC Server and controllers, see AC 800M, OPC Server (3BSE035983*) manual. 
The MMS Server is automatically installed with Control Builder or OPC Server.

1. See also Appendix A, OSI Profile for MMS.

32

3BSE035982-510

Section 2  MMS

Design

Configuration Parameters

Design

The Control Network is configured through the Project Explorer in Control Builder. 
The different alternatives are described in the hardware manual for the respective 
controller. Settings for the controller and the communication channel (Ethernet or 
PPP) are entered via the Control Builder. PC nodes are configured in the PC setup 
wizard (refer to the Setup Wizard online help and the manual Automation System 
Network, Design and Configuration, 3BSE034463*).

To display the parameter list from the hardware tree:

1. Expand Controllers

2.

Find your controller

3. Expand Hardware AC 800M

 

4. Expand the processor unit

5. Click the Ethernet channel

6.

Select the Settings tab.

Figure 5. Ethernet parameter list in Control Builder.

The IP address and IP subnet mask are standard IP terms, whereas the remaining 
parameters are used by the Redundant Network Routing Protocol (RNRP).

3BSE035982-510

33

Network Areas

Section 2  MMS

For more information on RNRP setup, see the manual Automation System 
Network, Design and Configuration (3BSE034463*).

Network Areas

The Control Network normally covers one manufacturing plant. A large Control 
Network can be divided into network areas (subnetworks), for example to keep 
most of the time-critical communication within smaller areas, thereby improving 
performance.

Network areas are interconnected by RNRP routers. The node type most commonly 
used as a router is the AC 800M Connectivity Server, see Figure 6. The AC 800M 
controller also has router capability, but since it only has two network ports it can 
only be a router between two non-redundant network areas. It is not possible to do 
routing between two redundant network areas by using two AC 800M with one on 
each path. In addition it is not possible to build a fully redundant solution by only 
using standard routers that do not use RNRP. For more information about this, 
please refer to the manual Automation System Network, Design and Configuration 
(3BSE034463*).

 

AC 800M will act as a router if it detects that its two ports are connected to two 
different network areas. It automatically starts routing without any need for extra 
configuration data

A path connection between two nodes must not contain more than three routers (a 
hop count greater than 3 is not permitted).

34

3BSE035982-510

Section 2  MMS

Network Areas

Figure 6. Non-redundant Control Network with three network areas which are 
connected via AC 800M controllers used as routers.
Example:

The two Ethernet channels of an AC 800M with node number 8 are used to connect 
network areas 1 and 3.

 

Port 1

Port 2

Figure 7. AC 800M used as a router between two network areas.

3BSE035982-510

35

Explicit and Implicit Addressing

Section 2  MMS

Explicit and Implicit Addressing

In the previous example the explicit addressing method is used. That is, in addition 
to entering the IP address the parameters network area, path number and node 
number are explicitly entered in the parameter list. While using the RNRP 
conventions, these parameters will automatically be extracted from the IP address 
and mapped onto the RNRP parameters if the corresponding entries in the parameter 
list are left zero. This is called implicit addressing. The parameter list for network 
area 3 above will have the appearance shown in Figure 8.

In order to obtain supervision of the Network connection, and the PPP 
connection done with explicit addressing, RNRP must be configured (enabled at 
all time).

 

Figure 8. Parameter list when the implicit addressing method is used.

MMS on RS-232C (PPP)

RS-232C is a point-to-point communication link for direct interconnection of two 
controllers. The point-to-point protocol (PPP) is used to support the IP network.

36

3BSE035982-510

Section 2  MMS

MMS on RS-232C (PPP)

Figure 9. MMS on RS-232C.
Clicking PPP displays a parameter list similar to that for Ethernet, but the 
destination must be known and entered as the remote IP address. 

 

Implicit addressing cannot be used in this case. Consequently network area, 
path number, and node number have to be entered in the parameter list.

PPP running on CI853 does not support Hot Swap and a controller using PPP can 
not be upgraded using the Online Upgrade function.

How to configure a PPP connection is described in detail in Control Builder 
online help.

To communicate with most products on the market, you must select an address from 
the class C private internet address space 192.168.0.0-192.168.255.0 with the 
subnet mask 255.255.255.0. Allowed node numbers are 1-254 and must be the same 
as the host ID part (the last part) of the IP address.

PPP communication must not use the same network id as Control Network 
communication. Using the same network id will result in IP addressing conflicts.

Changes to PPP network interface settings will not take effect until either a 
controller restart has taken place or the cable has been removed and then 
connected again.

3BSE035982-510

37

MMS on RS-232C (PPP)

Section 2  MMS

To make it possible for a controller to use PPP connection and not use the Ethernet 
ports, the Ethernet ports must be either disabled or set to use IP addresses that is not 
used somewhere else in the network system.

Example
(cid:129)

Controller_A is connected to the Control Network with the network address 
172.16.84.1
Controller_A is connected to Controller_B via a PPP link. 
Controller_B is not connected to any Ethernet network.

(cid:129)
(cid:129)

Control Network (Ethernet)

Programming
Station

PPP

 

Figure 10. Controller_A connected to Controller_B via PPP link

The following settings must be done to the Ethernet ports of Controller_B to make 
the PPP communication to work:

1. Ethernet port 1:

The IP address must be set to an IP address that is not used anywhere else in 
the network system, for example 172.0.0.1

Figure 11. IP address setting of Controller_B for Ethernet port 1

2. Ethernet port 2:

The parameter Enable Ethernet channel must be set to false (disabled) or be set 
to an IP address that is not used anywhere else in the network system (for 
example 172.0.0.2).

38

3BSE035982-510

Section 2  MMS

MMS on RS-232C (PPP)

Figure 12. Ethernet port 2 of Controller_B is disabled by setting the Enable 
Ethernet channel parameter to false

To make it possible to access Controller_B from the Control Network, the Network 
Area Local parameter of the PPP ports must be set to false for both controllers.

Com port 4 is pre-configured to be used as Tool Port. Use Com port 3 or a new 
added Com port (CI853 unit) with PPP for the connection. See Control Builder 
online help for additional information.

(cid:129)

Remote IP address of PPP for Controller_A must be set to the PPP IP address 
of Controller_B and vice versa, see Figure 13.

 

Figure 13. PPP settings for Controller_A and Controller_B

All routable (non-local) PPP links in the system must be given a unique Network 
Area number. However, the same node number can be used in different Network 
Areas, within same network (see Figure 14).

3BSE035982-510

39

Separation of Plant Intranet, Client/Server and Control Network

Section 2  MMS

Programming
Station

Control Network,
Network Area 1

Node 1

PPP
Node 1

Network Area 2

Figure 14. Node number 1 used in different Network Areas

Cables to use for PPP/COMLI connections

RTS 1
DTR 2
TD 3
SG 4
SG 5
RD 6
DCD 7
CTS 8

 

1 RTS
2 DTR
3 TD
4 SG
5 SG
6 RD
7 DCD
8 CTS

Figure 15. RJ45 to RJ45 serial cable.

Separation of Plant Intranet, Client/Server and Control Network

The Control Network must be protected from public traffic that can be a security 
risk and also cause undesired load on both the nodes and network. To avoid these 
risks the Control Network should be physically separated from the Plant Intranet 
and protected by servers and/or firewalls. In large configurations such separation 
may also be desirable between the Control Network and client/server networks. 
Refer to the manual Automation System Network, Design and Configuration, 
(3BSE034463*) for more information.

40

3BSE035982-510

Section 2  MMS

Hardware

Hardware

All hardware complying with the Ethernet IEEE 803.2 standard can be used for 
MMS communication. Typical hardware units that can use MMS are Ethernet 
transceivers, hubs, switches, and routers.

Although the Ethernet standard used in automation technology is the same as in an 
office environment, the requirements for network products differ considerably. In 
industrial applications, networks are expected to work reliably under extreme 
conditions, such as electromagnetic interference, high operating temperatures and 
mechanical loads.

Redundancy

The RNRP protocol is based on alternative redundant paths between systems in 
order to quickly respond to network failures. If one path becomes faulty, another 
path will be used instantly. All paths use different physical networks to maximize 
the redundancy.

Devices connected with redundancy must have one interface to the primary 
network and one to the secondary network. The node number must be the same 
on both networks.

 

A Control Network may contain both redundant and non-redundant network areas. 
Moreover, nodes with redundant interfaces and those with a single interface can be 
mixed in the same network area. A node with only one interface must be connected 
to the primary network

Network applications must always have address nodes on the primary network. 
In the case of an error the RNRP redirects traffic to the secondary network 
without involving an application program.

CPU Redundancy

AC 800M can have two redundant processor units working in dual CPU mode with 
the same functionality as a system running with only one CPU. The backup CPU is 
running in standby mode, ready to smoothly take over execution from the primary 
CPU in case of hardware failure.

3BSE035982-510

41

CPU Redundancy

Section 2  MMS

CPU redundancy in a non-redundant network requires that Ethernet port 1 (CN1) 
on both CPU units are connected to the same network. 

CPU redundancy in a redundant network requires that Ethernet port 1 (CN1) on 
both units are connected to the primary network, and Ethernet port 2 on both 
units are connected to the secondary network.

The assignment of IP addresses for the Ethernet ports (CN1 and CN2) of the 
primary CPU unit is performed from Control Builder, in the same manner as for a 
non-redundant processor unit. The Ethernet ports of the secondary CPU unit will 
have to be assigned another IP address, using the IPConfig tool. The IP address of 
the secondary CPU unit is only used for internal communication and is never used 
by other nodes in the control network. When the backup processor becomes the 
primary processor, it automatically takes over the primary IP address. In this way, 
the IP address used for communication throughout the network stays the same.

Which IP addresses to use for the secondary CPU unit depends on the strategy 
used for redundant units throughout the network. For more information about 
how to set IP addresses, see online help for the IPConfig tool.

 

The user application need not be aware of the redundant CPU option. It is possible 
to reconfigure a system running in single mode to include a backup CPU without 
any changes to the application. 

CEX bus

PM861

PM861

Dual AC 800M

RCU link

Redundant network

Figure 16. Example of redundant CPU configuration.

42

3BSE035982-510

Section 2  MMS

Performance

Performance

Performance is affected by transmission speed, message length and application 
load.

For Ethernet channels AC 800M currently supports 10 Mbit/s transmission speed 
(half duplex). For RS-232C channels the baud rate can be selected between 2400 
and 19200 bit/s. To send one byte requires 11 bits (start bit, 8 data bits, parity bit 
and stop bit). Consequently 9600/11 = 872 B/s can be sent if the baud rate is 9600.

In AC 800M, servicing the S800 I/O via ModuleBus has highest priority. Execution 
of the application program (IEC 1131-code written by the user) has next highest 
priority. Communication handling in the controller has the lowest priority.

If a IEC 1131 task executes continuously for a long time, the controller 
communication will go through latency. If the continuous task execution is very 
long (> 300 ms), it results in resends on the TCP/IP level.

The MMS performance decreases during download of applications to the controller 
and controller configuration.

If the MMS requests exceed the available capacity, the communication rate slows 
down and it adjusts to the available capacity. In that case, the requested 
communication cycle time will not be fulfilled.

 

Master functionality is implemented by function blocks provided by the 
communication libraries, such as MMSWrite and MMSRead-used to write/read 
data between controllers. In a system acting as master, the communication 
performance is of course affected by the execution interval of the communication 
function blocks in the application program. The response is handled in the 
background and is not triggered by the application program in the slave system, but 
slowed if the application load is high.

3BSE035982-510

43

Performance

Section 2  MMS

If the network is disconnected from the controller, the parameter Valid is true for 
15 seconds. During this time, the MMSRead block will show Valid and status 2 
(=success with warning). This means that if there has not been any traffic within 
a period the TCP will strobe the other end to check if the connection is up. The 
following settings have been selected for a connection:

The period time is 7 seconds, the strobe is 8 messages with one second separating 
them. This will give a time-out of: 7 seconds + 8 messages * 1 second = 15 
seconds. 

A long message takes longer to transmit than a short one, but it is always more 
efficient to use long messages if a large data area is to be transmitted. 

With the MMS protocol, the maximum message size for communication between 
controllers is 1024 bytes. This limitation does not apply to MMS communication 
between applications in the same controller.

Variables require different amounts of message space depending on the variable 
type (see Table 5). In addition, the message header requires 60-70 bytes.

 

The Ethernet standard allows bandwidth transmission at 10 Mbit/s, 100 Mbit/s 
(fast Ethernet), and 1000 Mbit/s (gigabit Ethernet), but the Control Software 
currently supports only 10 Mbit/s (half duplex).

Table 5. Space requirements of different variable types

Variable type

Size in telegram

Maximum number 

of variables in 
one telegram

Bool

Dint, Int, word, dword

Real

3 bytes

6 bytes

7 bytes

332

166

142

44

3BSE035982-510

Section 2  MMS

Limitations

Table 5. Space requirements of different variable types

Variable type

Size in telegram

Maximum number 

of variables in 
one telegram

String

Struct

4 bytes header +
1 byte/character

190 string [1]
6 string [140]

4 bytes header +
components as above

The maximum value for number of variables are valid for read request. A write 
request also includes the access variable name strings in the message.

Redundancy on PPP-link is not supported.



PPP does not support online upgrade.

 

Limitations

(cid:129)

(cid:129)

(cid:129)

(cid:129)

A maximum of four PPP links are allowed:
One tool port link and one PPP link (integrated in the CPU unit), plus 
additional PPP links via a CI853 unit, can be used.

CPU redundancy is not supported for the PM851, PM856 and PM860 
AC 800M processor units.

Routing is only allowed in the following situations:





Routing of MMS via an OPC Server PC between Control Network and the 
Operator Workplace network is allowed.

Routing via PPP from one controller to another is allowed, but only to the 
far ends in the network (only one hop). Using PPP to connect different 
Ethernet Control Networks is not allowed.

(cid:129)

The maximum number of RNRP nodes in a network area is limited to 50.

3BSE035982-510

45

Advanced

Advanced

Default Gateway

Section 2  MMS

Systems that do not need network redundancy can, instead of RNRP, use the 
alternative routing method with a default gateway configured in each controller.

In the example (Figure 17) the controllers on the 3 control networks can 
communicate with each other, and the Control Builder can reach all controllers even 
though RNRP is not used on the controller backbone. However, the routers do need 
to be configured in some way to know about each others networks and the Control 
Builder PC also needs this information. This configuration can be done manually or 
by using a standard routing protocol such as for example OSPF or RIP. To use this 
in a PC typically a Windows Server Operating System is needed.

For each controller the parameter Default Gateway should be set to the control 
network address of the router, see Figure 18. RNRP and routing with default 
gateway can be used simultaneously. In the example this could be used if the control 
networks need to be redundant, but the backbone and the connection to it does not.

 

PC with Control Builder

Controller backbone without RNRP

Router

Router

Router

172.16.81.245

172.16.85.245

172.16.89.245

Figure 17. Routing to external servers.

46

3BSE035982-510

Section 2  MMS

Default Process Number

Figure 18. Parameter list specifying default gateway.

It is possible to define two static routing paths. These are defined using the 
IPConfig help tool, which is installed with the system and can be accessed via the 
Windows Start menu. For more information, see online help for IPConfig.

 

Default Process Number

When a PC has several applications running and another PC wants to communicate 
with either of these applications, a process number must be taken into consideration. 
This number is added to the system ID, separated by a colon, for example 
172.16.84.1:2. 

For default process numbers, see Table 6.

Product

MMS Server

Control Builder

OPC Server

Table 6. Default process number.

Default process number

0
1 1

22

3BSE035982-510

47

Troubleshooting

Section 2  MMS

Product

Tool Routing

AC 800M

Soft Controller

Table 6. Default process number.

Default process number

30

1

2

1

The MMS process number of the Control Builder process is usually 1. It will still be 1 for a Control 
Builder session that is executing locally on the terminal server console. For a remote Control 
Builder session the MMS process number will be in the interval of 31-40. The MMS process 
number will be 31 for the first remote Control Builder session, 32 for the second and so on.

Troubleshooting

The following sources indicate the communication status of Control Network 
nodes.
1. The Control Builder hardware tree shows the status of interfaces.
2.

In Control Builder, right-click the controller to show Remote System. This is 
used to list the systems connected to a particular network.

 

3. Controller log file. Printouts of node failures and complete network failures.
In Command Prompt on PC, use the command "ipconfig/all" to list installed 
4.
interfaces and show routes to accessible networks.

5. RNRP monitor that can be installed from the Industrial IT 800xA DVD.

6. The function block SystemDiagnostics (Basic library), shows Ethernet 

statistics (number of received/lost and transmitted/lost packages).

48

3BSE035982-510

Section 3  IAC

Introduction

Inter Application Communication (IAC) is defined as the variable communication 
between applications that use a special category of variables called communication 
variables. 

Characteristics of Communication Variables

The communication variables are used for cyclic communication between diagrams, 
programs and top level single control modules, which can exist in the same 
application, the same controller or in another controller (peer to peer). These 
variables use cyclic reading of data for communication.

A communication variable has a name, a direction and a data type. The direction of 
the communication variable can be either in or out. 

 

The name of the communication variable with direction out must be unique on 
the control network. This helps to resolve the IP-address between the in and out 
variable during compilation.

Communication variables behave differently depending on where the variables are 
placed:

(cid:129)

Communication variables in the same application connected to the same 
IEC 61131-3 task 



In this case, the in and out variable represents the same physical memory 
location, hence no communication is setup.

3BSE035982-510

49

Services Provided

Section 3  IAC

(cid:129)

Communication variables in the same application but connected to different 
IEC 61131-3 tasks or between different applications in the same controller 



In this case, fast data copying is performed at each 61131-3 task scan for 
the in variable. This is controlled by the task time, hence no external 
communication is setup.

(cid:129)

Communication variables in different applications in different controllers



In this case external communication is setup. The protocol used is 
IAC_MMS, which is based on User Datagram Protocol (UDP). 
Five different interval time categories are used and these are configured on 
the IAC_MMS hardware unit in Control Builder. 

Each communication variable has a built-in status word. For external 
communication, the status goes to Uncertain if no response is received within one 
interval time cycle, and to Bad if no response is received within the timeout period.

IAC_MMS uses the built-in alarm and event handling for the unit status on the 
hardware unit. Whenever a connection is down or data is not communicated in time 
(timeout), the unit status indicates this. A system alarm is also generated when a 
connection goes down and events are triggered if timeout occurs.

 

Services Provided

In Control Builder, the communication variables for IAC are declared in the 
program editor or top level single control module editor in the application. The 
communication variables are also declared in the Function Diagram that is allocated 
to the application (using the Function Designer in 800xA).

The hardware object IP, which is reserved at position 0.5 under the AC 800M 
controller in the hardware tree, holds the hardware object IAC MMS. 
The IAC MMS object controls the cyclic communication using communication 
variables.

50

3BSE035982-510

Section 3  IAC

Design

Design

If the direction of a communication variable is out, the application that holds this 
variable is the Server application. If the direction of a communication variable is in, 
the application that holds this variable is the Client application.

An In variable is resolved if there exists a corresponding Out variable with the same 
name in the control network. 

The data type of the communication variable can be a simple type or a structured 
type.

For communication variables with structured data types, bidirectional 
communication is also possible if the reverse attribute is set. As the effect of reverse 
attribute, some of the components communicate in forward direction while others 
communicate in backward direction. For this type of communication, only one 
server and one client can be connected (1:1).

The ISP (Input Set as Predefined) value of the In communication variable is also 
entered while defining the In communication variable. This value is assigned for the 
communication variable if there is an error in communication. If the ISP value is not 
entered, the last good value is assigned if there is an error in communication.

 

For structured data types, the ISP values can only be set in the data type for each 
individual component. Hence, it is not possible to configure instance specific ISP 
values for structured data types.

Interval Time and Timeout

The interval time for communication variables is classified into five categories  
VerySlow, Slow, Normal, Fast, and VeryFast. The category is selected while 
declaring the communication variables.

It is possible to change the value of interval time (in milliseconds) for these 
categories in the IAC MMS hardware editor in Control Builder.

The timeout before the communication variable is assigned the ISP value is also 
defined corresponding to the interval time category in the IAC MMS hardware 
editor.

3BSE035982-510

51

Redundancy

Section 3  IAC

Resolving the IP address

The IP address of the communication variables is resolved during compilation in the 
Control Builder. 

If the Out variable is in the same controller or in another controller in the same 
800xA system, the IP address of the variable is resolved automatically.

If the Out variable is in another controller in another 800xA system in the control 
network, the IP address is resolved only if this IP address is specified while 
declaring the In variables.

Redundancy

The RNRP protocol is based on alternative redundant paths between systems in 
order to quickly respond to network failures. If one path becomes faulty, another 
path will be used instantly. All paths use different physical networks to maximize 
the redundancy.

Devices connected with redundancy must have one interface to the primary 
network and one to the secondary network. The node number must be the same 
on both networks.

 

A Control Network may contain both redundant and non-redundant network areas. 
Moreover, nodes with redundant interfaces and those with a single interface can be 
mixed in the same network area. A node with only one interface must be connected 
to the primary network

Network applications must always have address nodes on the primary network. 
In the case of an error the RNRP redirects traffic to the secondary network 
without involving an application program.

52

3BSE035982-510

Section 3  IAC

Performance

Performance

The communication using communication variables is faster compared to the 
peer to peer communication using MMS function blocks.

Cyclic Load and Total Load in Controller

By using IAC, the cyclic load and total load in the controller is reduced compared to 
usage of MMS function blocks for communication.

Application Download

The communication variable configuration is downloaded when the application is 
downloaded to the controller. It is possible to download an unresolved In (or 
bidirectional) communication variable, even though the communication may not 
happen. To resolve an unresolved communication variable that already exists in a 
controller, the new configuration with the Out variable must be downloaded.

When an Out variable is deleted, only the applications that are affected by the 
download recognize the corresponding unresolved In variables. All the applications 
fail to communicate with the removed Out variable.

 

To support multi user engineering, all the affected controllers are reserved during 
the last step of the communication variable analysis, until the configuration is 
downloaded. 

Interval Time and Timeout

The interval time and timeout of communication variables are applicable only for 
external communication (communication between controllers), and not for internal 
communication (communication between applications in the same controller).

3BSE035982-510

53

Limitations

Limitations

Section 3  IAC

IAC using communication variables are applicable only to NonSIL 
configurations.

Communication variables are not allowed in distributed applications (an 
application that is executed in several controllers).

Communication variables cannot be used along with Load Evaluate Go (LEG).

Message Size

The request message contains the names of the requested communication variables. 
The response message from the server contains the values and the types of the 
requested variables. If all communication variables do not fit in one message, 
several requests are made.

The maximum message size is 1.5 kB including headers. One message can contain 
one or more communication variables. 

 

Table 7. Message size for data types

Data type

Message size 

(Bytes)

Bool

Real

Dint, Dword

Int, Uint, Word

String

1

4

4

2

1 + String length + 
padding (4 bytes 
aligned)

54

3BSE035982-510

Section 3  IAC

Troubleshooting

Structured data types have a header of 6 bytes containing the signature and number 
of components. Since the type information is in the header and not for each 
component, the structured data types are more efficient in communicating over the 
network compared to the simple data types. 

The communication happens even though the message size of communication 
variable exceeds the maximum size, but it will be indicated on the status 
component of the communication variable.

Troubleshooting

A diagnostic tool for communication variables is available in Control Builder. This 
tool can be accessed from the Remote System dialog of the controller (right click 
the controller, select Remote System, and click Show Diagnostics for 
Communication Variables).

It is also possible to access the status of a communication variable using the :status 
notation (VariableName:status) in the programming code.

A system alarm is generated when a connection goes down and events are triggered 
if timeout occurs.

 

3BSE035982-510

55

Troubleshooting

Section 3  IAC

 

56

3BSE035982-510

Section 4  MasterBus 300

Introduction

MasterBus 300 (MB 300) can be used for communication between AC 800M and 
AC 400 Master, MasterPiece 200 or other AC 800M controllers. A communication 
unit CI855 for AC 800M provides connectivity to AC 400 via MB 300. Refer to the 
relevant users guides and reference manuals regarding the process interface that can 
be used with AC 400.

The CI855 unit is configured by means of Control Builder in the hardware 
configuration tree.

CI855 has two Ethernet channels to provide network redundancy.

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

DataSet (DS) communication with other controllers on MasterBus 300.

Function blocks in the AC 800M are used to cyclically send and receive 
DataSets on MB 300.

Time synchronization on MB 300 is supported in the AC 800M with the 
accuracy provided on MB 300.

The CI855 unit status, watchdog supervision and logged system messages are 
reported to the AC 800M for display in the Control Builder and the 
Plant Explorer Workplace status system.

Support of MB 300 network redundancy.

Services Provided

 

3BSE035982-510

57

Design

Design

Introduction

Section 4  MasterBus 300

The three function blocks MB300Connect, MB300DSSend and MB300DSReceive, 
handle communication between DataSets belonging to different controllers 
connected to MasterBus 300. A DataSet consists of an address part and up to 24 
elements (32-bit values). A value can be a 32-bit integer, a 16-bit integer, a real or 
32 Boolean. The address part is the destination network node, the source network 
and a DataSet identity. 

Each CI855 unit behaves as a unique node on the MB  300 network to which it is 
connected and must be configured accordingly in the Control Builder hardware 
configuration tree. Parameters downloaded to the CI855 are:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Design Example

A personal node number

Network numbers for the two network links

 

The MB 300 Protocol type, i.e. MB 300, MB 300E or MB 300F

Clock-synchronization function

An AC 800M controller is connected to a redundant MasterBus 300 network via a 
CI855 unit and can exchange DataSets with other controllers connected to the 
MasterBus 300 network, such as AC 410 and AC 450. The same AC 800M 
controller can also communicate with other controllers on Control Network. For 
small applications, MB 300 and Control Network may use the same physical 
Ethernet cable. 

58

3BSE035982-510

Section 4  MasterBus 300

Communication Function Blocks

Other controllers on MasterBus 300

AC 800M

CI855

MasterBus 300

Control Network

Figure 19. AC 800M connected to MasterBus 300 and Control Network.

MasterBus 300 network may be either redundant or singular.

Communication Function Blocks

 

An AC 800M on Control Network connects to a controller on MB 300 by means of 
an MB300Connect function block. The MB300DSReceive and MB300DSSend 
function blocks with the same Id parameter value as the MB300Connect function 
block can then be used repeatedly for communication with that controller. See the 
example in Figure 20. Refer to the online help for an explanation of the function 
block parameters. 

The CIPos parameter specifies the position number of the CI855 unit in the 
hardware tree (identical to its position on the CEX bus). CAPos specifies the 
MB 300 network number, and NodePos the node position of the controller on the 
network. DataSetId is an integer specifying the DataSet identity. SupTime specifies 
the time interval between receive or send operations. The extensible parameters Rd 
and Sd of AnyType data type indicate the total number of application variable names. 
They allow the user to specify personal parameters, the only restriction being that 
the total number of parameters must equal the total number of allocated elements in 
the DataSet.

Table 8 indicates the mapping between data types used in AC 800M and data types 
used in other controllers on MB 300. 

3BSE035982-510

59

Communication Function Blocks

Section 4  MasterBus 300

Controllers 
on MB 300 

CI855 

Interface 

unit

AC 800M

MB300Connect

CIPos
CAPos
NodePos

Id

MB300DSReceive

DataSetId

Rd

MB300DSSend

DataSetId

Sd

Id

Id

DSSend

Sd

DSReceive

Rd

 

Figure 20. Exchange of DataSets (DS) via MB 300 by means of function blocks.

Table 8. Mapping of data types

Data types in other 
controllers on MB 300

Data types in AC 800M

Boolean32

16-bit integer

32-bit integer

real

dint

int

dint

real

60

3BSE035982-510

Section 4  MasterBus 300

Redundancy

Redundancy

The CI855 unit houses two Ethernet channels to provide network redundancy. The 
routing tables in CI855 that indicate the network, node address and port to use when 
sending to an MB 300 node, are continuously recalculated according to the latest 
topology information in the routing messages. In the case of link/node failures, 
switch-over to redundant links is automatic.

Limitations

MasterBus 300 in AC 800M is used for communication with other nodes such as 
AC 400 Master, MP 200 and AC 800M.

A DataSet consists of up to 24 elements (32-bit values).

Performance

 

Transmission speed: 200 packets/s.

Clock synchronization: 3 ms.

Hardware

(cid:129) MasterBus 300 interface unit CI855 connects to the CEX bus of the AC 800M.

(cid:129)

Twisted pair 10BASE-T Ethernet cable with RJ45 connector is used. The 
installation should comply with Category 5 specification according to 
IEEE 802.3.

3BSE035982-510

61

Advanced

Advanced

Section 4  MasterBus 300

Time synchronization on MasterBus 300 is supported in the AC 800M by the 
accuracy provided on MB 300. 

The CI855 editor in the Control Builder is used to specify the clock synchronization 
mode:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

No synchronization

CI855 is synchronized by AC 800M:



CI855 does not synchronize MB 300 network.

CI855 is synchronized by MB 300:

 AC 800M may be synchronized by CI855.

CI855 is synchronized by AC 800M:



CI855 is clock-master in the MB 300 network.

If AC 800M is to be synchronized from the CI855 unit, it is also necessary to select 
MB 300 as clock synchronization type in the CPU hardware editor.

 

Troubleshooting

The CI855 device status, watchdog supervision and logged system messages are 
reported to the AC 800M for displaying in the Control Builder and Plant Explorer 
Workplace status system. 

Watchdog mechanisms are used by the AC 800M to supervise the CI855, which 
supervises the AC 800M. The watchdog function is cyclically called and interrupts 
the CI855 unit, which, if it does not receive an interrupt within a certain time, stops 
communication at its ports. The CI855 responds with a watchdog signal to the 
AC 800M, which expects the CI855 unit to cyclically generate watchdog interrupts. 
The unit is considered out of function if an interrupt is missing. The CI855 
operating system has its own watchdog/stall handling, which will halt the CI855 
processor in the event of hardware or software errors.

62

3BSE035982-510

Section 5  COMLI

Introduction

COMLI (COMmunication LInk) is a standard protocol for data 
transmission/communication between controllers. It is a conventional 
communication link using serial, asynchronous data transmission according to the 
master/slave principle, in one direction at a time (half duplex mode). It is used for 
reading and writing variables between control network devices, using point-to-point 
communication or multidrop communication. COMLI can be used in serial 
communication and in SattBus-TCP/IP communication.

COMLI is suitable for communication with controllers such as SattCon 05, 31, 35 
or 200. COMLI ensures that:

 

(cid:129) Maximum use is made of the communication line, resulting in compact storage 

of data transmitted or received,

(cid:129)

Transmission is secured by checking every character as well as the entire 
message.

Services Provided

Master

(cid:129)

(cid:129)

(cid:129)

(cid:129)

COMLI ReadPhys (Read Physical Value) (message G)

COMLI WriteDT (Write Date and Time) (message J)

Read and Write in registers and bits (messages 0, 2, 3, 4)

Read and Write in high registers (message <, =)

3BSE035982-510

63

Design

Section 5  COMLI

Slave

(cid:129)

(cid:129)

(cid:129)

Read and Write in registers and bits (messages 0, 2, 3, 4)

Read and Write in high registers (message <, =)

COMLI WriteDT (Write Date and Time) (message J)

Design

Introduction

Master and slave can be linked together in two different ways to achieve the desired 
function. They are:
(cid:129) Multidrop (multipoint) communication.
(cid:129)

Point-to-point communication.

Master and slave are linked through the serial channels on the different systems that 
are communicating with each other. The master and slave need not use the same 
physical channel numbers in both systems. They must, however, have the same 
character format, transmission speed, and so on.

When the slave receives a message, it responds either by sending the information 
requested or by acknowledging the information received. The slave does not 
respond if it receives a faulty message.

 

To change the status of a system/device from master to slave, a new configuration 
must be downloaded from Control Builder.

Design Examples

Multidrop Communication

In multidrop communication several slave systems are connected to a master, see 
Figure 21. Communication takes place between the master and one slave at a time. 
Direct communication between slave systems is not possible. A particular message 
from the master is sent to all slaves, but only the slave, whose unique identity 
corresponds to the identity contained in the message accepts the data. 

64

3BSE035982-510

Section 5  COMLI

Design Examples

The number of slaves that can be connected to each master is limited by the 
communication interface. A RS-232 converter (for example to RS-485) must be 
used in multidrop communication. When using RS-485, both 2-line and 4-line 
connection can be used. When using 4-line connection, the master transmit line is 
connected to all slave receive lines and all slave transmit lines are made common 
and connected to the master receive line.

Master
Channel n

RS-232C 
converter

Slave ID 1

Slave ID 247

Slave ID 125

 

Figure 21. Example of multidrop communication.

Point-to-Point Communication

In point-to-point communication, only one slave system is connected to the master 
through one communication interface, see Figure 22. Several slaves can be 
connected to the master, but this must take place through different communication 
interfaces. This form of point-to-point configuration can reach a capacity higher 
than that achieved with multidrop communication.

The electrical interface is RS-232C or any other interface using an appropriate 
converter.

3BSE035982-510

65

Redundancy

Section 5  COMLI

Master
Channel n

Master
Channel m

Slave ID 1

Slave ID 1

Figure 22. Example of point-to-point communication.

Redundancy

 

Redundancy is not built in, but can be implemented on application level or physical 
(cable) level by the user, by adding another CI853 module and configure the 
necessary redundant functions in the application program.

Limitations

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Using a RS-485 converter, a maximum of 31 slave systems can be connected to 
each serial channel. 

The COMLI communication protocol can administer a maximum of 247 slave 
identities, see Figure 21).

The maximum message size is 512 bits or 32 16-bit registers (integer reading).

The range for COMLI address is 0-247.
The master address is 0 and the slave address is in the range 1-247.

66

3BSE035982-510

Section 5  COMLI

Performance

Performance

Performance is affected by transmission speed, message length and application 
load.

For RS-232C channels a baud rate can be selected between 2400 and 19200 bit/s. 
To send one byte requires 11 bits (start bit, 8 data bits, parity bit and stop bit). 
Consequently 9600/11 = 872 bytes per second can be sent if the baud rate is 9600.

The maximum transmission distance depends on the interface used and the 
transmission speed. Use RS-232C for short distances, maximum 15 meters. Use an 
appropriate converter for longer distances. Note that a noisy electrical environment 
may require shorter distances.

In AC 800M, servicing the S800 I/O via ModuleBus has highest priority. Execution 
of the application program (IEC 1131-code written by the user) has next highest 
priority. Communication handling has lowest priority, and communication 
performance is therefore affected by the load from higher prioritized tasks. 
Communication takes place serially and asynchronously according to the 
master/slave (or client/server) principle. The master channel of a system initiates 
the message transmission sequence, while a system acting as a slave simply 
responds to the calls from the master via a slave channel.

 

Master functionality is implemented by function blocks provided by the 
communication libraries, such as COMLIWrite and COMLIRead, used to 
write/read data between controllers. In a system acting as master, the 
communication performance is of course affected by the execution interval of the 
communication function blocks in the application program. Response is handled in 
the background; it is not triggered by the application program in the slave system, 
but is slowed down if the application load is high.

Register and I/O bits are two terms referring to the COMLI protocol. Registers (16 
bit integers 0-65535) are mapped to the data types int (integer, 16 bits), dint (double 
integer, 32 bits) or uint (unsigned integer, 16 bits) in the Control Builder 
environment, and I/O bits are mapped to the data type bool (Boolean). If writing a 
dint variable it has to fit into 16 bits, otherwise COMLI will return an error message. 
All parameters (both registers and I/O bits) must be of the same type if sending 
several values in one function block. That is mixing of variables of different types 
(int, dint, uint or bool) within the same function block is not allowed. The maximum 
number of registers that can be sent in one message is 32, independent of the 

3BSE035982-510

67

Hardware

Section 5  COMLI

variable type. Boolean variables must be transferred either as a single variable or in 
multiples of eight, maximum 512. A long message takes longer to transmit than a 
short one, but it is always more efficient to use long messages if a large data area is 
to be transmitted.

Hardware

COMLI can be used on the build in COM3 port and optionally on the CI853 ports. 
The cable length can be extended considerably (to several km) using a fiber optic 
converter. RS-232C is the standard communication interface used for serial 
communication with COMLI. The CI853 supports Hot Swap.

Advanced

Procedure for Linking Control Systems with COMLI

The procedure for connecting different control systems to a common COMLI 
communication network can be summarized as follows:

Select the message types by establishing the type of information to be 
transmitted between systems.

 

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Select the network configuration. Select multidrop or point-to-point and the 
communication interface to be used.

Select the channel (channels) to be used. The choice depends on which 
channels are available and whether the channel can transfer the required 
information at the required speed.

Decide which system is to be master and which is to be slave. This is specified 
in the channel parameter list. The master controls data transmission operations 
since only the master can initiate a message transmission sequence.

Connect the systems to the network with suitable cables.

When the above has been completed, the various communication parameters can be 
defined in a number of data fields. 

For further information about COMLI, refer to the COMLI System Description 
(493-0192-11).

68

3BSE035982-510

Section 6  SattBus on TCP/IP

Introduction

SattBus is a communication network for linking controllers, intelligent I/O devices, 
sensors, etc. 

SattBus is an open protocol that can be implemented by any manufacturer. Due to its 
low memory requirements, SattBus can be integrated with an application in a single-
chip microcontroller. Different types of interfaces, for example for PCs, are also 
available. 

The multimaster operation allows event communication, which increases the 
efficiency and lowers utilization of the network. SattBus is optimized for the 
transfer of small amounts of data. All this contributes to making SattBus a high-
performance network for systems with highly distributed data reaching a maximum 
effective data transmission rate of 3000 bytes per second.

 

Services Provided

SattBus provides the following services:

(cid:129)

Variable names.

(cid:129) Managing and accessing variables in remote nodes.

(cid:129)

COMLI transparent messages over SattBus:

 Master: COMLI ReadPhys (Read Physical Value) (message G)

 Master: COMLI WriteDT (Write Date and Time) (message J)

 Master: Read and Write in registers and bits (messages 0, 2, 3, 4)



Slave: Only Read and Write in registers and bits (messages 0, 2, 3, 4)

3BSE035982-510

69

Design

Section 6  SattBus on TCP/IP

In total, 16 services are defined in the SattBus protocol. The most important ones 
relate to variable transfer.

All nodes on SattBus are equipped with the basic ability to identify the node by a 
short, five character name. This service also provides the program version and 
defines the other SattBus services the node can handle. Nodes with different sets of 
variables have different identities.

Design

Introduction

Communication is performed via SattBus function blocks found in the SattBus 
communication library: SBConnect, SBRead, SBWrite and ComliSB function 
blocks (ComliSBConnect, ComliSBRead, ComliSBReadCyc, ComliSBReadPhys, 
ComliSBWrite, ComliSBWriteDT). ComliSB function blocks are used for directly 
addressed communication (e.g. X100, R1000). SBRead/SBWrite are used for 
named SattBus communication.

In named SattBus, a structured variable can have 254 components of simple data 
types.

 

Redundancy

SattBus does not support redundancy.

Limitations

Physical SattBus is not supported. 

For SattBus on a TCP/IP connection, the valid node number range is 2-127, for 
example '88'.

70

3BSE035982-510

Section 6  SattBus on TCP/IP

Performance

Performance

If each node is allowed a maximum of one message frame per token rotation, then 
the SattBus data link layer can transfer up to 3000bps within message frames. 
Transfer efficiency is over 30%. SattBus is stable in an overload situation, that is the 
throughput does not decrease as the load increases and the system does not become 
blocked.

Advanced

SattBus communication uses the Ethernet network, SattBus messages are 
transferred using TCP/IP. Communication is also possible using COMLI function 
blocks via SattBus on TCP/IP.

SattBus application messages are sent as is using the User Datagram Protocol 
(UDP) of the TCP/IP suite. A small heading is added for a transport protocol 
implemented on top of UDP. This protocol is responsible for sequence and transport 
control, assuring that SattBus messages are received in order, and that they are 
transmitted up to 4 times until they are acknowledged (on the transport level) by the 
receiver.

 

The node status supervision of physical SattBus is simulated on the transport level 
above UDP by sending background supervision traffic a number of times per minute 
(in the absence of other traffic). This enables node status reports to perform in a 
similar way to physical SattBus, although the time resolution is lower. However, this 
applies only to nodes where logical connections exists.

3BSE035982-510

71

Advanced

Section 6  SattBus on TCP/IP

 

72

3BSE035982-510

Section 7  INSUM

Introduction

INSUM (INtegrated System for User-optimized Motor control) utilizes 
microprocessor-based technology for protection and control of motors and 
switchgear, and for the transmission of messages and measured values.

There are different device types in the INSUM System. The AC 800M can 
communicate with the most commonly used device types:

(cid:129) Motor Control Unit (MCU),

(cid:129)

Circuit Breaker.

 

The INSUM devices are connected to a 78 kbit/s LonWorks Network. Up to four of 
these networks can be connected together via routers in a switchgear unit. The 
routers and the other devices in the switchgear unit communicates with 1.25 Mbit/s. 
In the switchgear unit the following device types can be connected:

(cid:129)

Routers for one or two 78 kbit/s LonWorks subnets,

(cid:129) Man Machine Interface (MMI) for commissioning and maintenance,

(cid:129)

(cid:129)

TCP/IP Gateway,

System Clock.

The INSUM TCP/IP Gateway is used when the INSUM System is connected to the 
800xA system via the CI857 module in the AC 800M controller.

3BSE035982-510

73

Services Provided

Section 7  INSUM

Services Provided

(cid:129) Multiple controllers can access the same MCU in an INSUM system.

(cid:129)

(cid:129)

(cid:129)

(cid:129)

There are three IEC 61131 function blocks for communication with the 
INSUM system:







INSUMConnect: Establishes connection,

INSUMReceive: Reads a process data value from an INSUM device,

INSUMWrite: Writes a value to an INSUM device.

A number of different motor types are supported, such as reversing motors, 
two-speed drives, actuators, and solenoid valves.

Protection against thermal overload, underload, phase loss, ground fault, high 
motor temperature, locked rotor, etc.

Protection functions can be parameterized to specify pre-warnings before a 
motor is tripped. The reset can be selected as automatic, remote, local or 
remote and local.

 

INSUM hardware is configured with the Project Explorer (see Figure 23). The 
AC 800M is equipped with two INSUM TCP/IP CI857 interface units, located as 
numbers 3 and 4 to the left of the PM860 CPU unit. Three INSUM gateways are 
connected to unit number 3. Each gateway is supervising an INSUM motor control 
system. 

Gateway number 2 has three MCUs and one tier switch connected to its subnet 
number 1, with node numbers 1, 2, 3 and 32. Two MCUs are also connected to 
subnet number 2 and one circuit breaker to subnet number 4.

The CI857 units and the INSUM gateways have IP addresses that must be specified 
in the parameter lists. 

Design

Introduction

74

3BSE035982-510

Section 7  INSUM

Design Example

 

Figure 23. Project Explorer.

Design Example

The AC 800M controllers use the CI857 to connect to an INSUM Ethernet network 
running TCP/IP at 10 Mbit/s half duplex. An INSUM TCP/IP gateway connects the 
Ethernet to the LonWorks network that communicates via routers with the INSUM 
devices arranged in four subnets. A complete INSUM system is shown with 128 
INSUM devices (motor control units, circuit breakers and intelligent tier switches 
[ITS]). An MMI (man-machine interface) is connected to LonWorks.

Due to performance considerations, the Control Network and the TCP/IP 
Ethernet between CI857 and the INSUM TCP/IP gateways must be kept 
separate. Also, see INSUM documentation.

 

3BSE035982-510

75

Design Example

Section 7  INSUM

Control Network

INSUM
operator
station

LonWorks

AC 800M 
controllers

CI857

CI857

TCP/IP 
Ethernet

INSUM

TCP/IP gateway

MMI

Router

Router

Router

Router

Subnet 1

MCU 
1/01

MCU 
1/32

Subnet 2

 

MCU 
2/01

MCU 
2/32

Subnet 3

Subnet 4

MCU 
3/01

ITS 
3/32

CB 
4/01

CB 
4/32

Figure 24. INSUM integration with Control Network.

INSUM Alarms

All INSUM devices (MCU, Circuit Breaker) have supervision functions that can 
report alarms. The different device types supervise and report specific alarm types. 
The alarms are reported in specific Network Variables. 

MCUs report the alarms in the Network Variable NVAlarmReport. 

The user can decide if there should be a summary entry that tells that there are some 
alarms (one or more) in the device. From System Version 4.1 it is possible to have a 
separate summary alarm for warnings and a separate alarm for trips. For more 
information about INSUM alarms, refer to the manual System 800xA Control AC 
800M Configuration (3BSE035980*).

76

3BSE035982-510

Section 7  INSUM

Redundancy

Redundancy

Redundancy is not built in, but can be implemented on the application level by the 
user. The ethernet connection between CI857 and the INSUM TCP/IP Gateway can 
be made redundant by using network switches with a redundancy protocol, for 
example ring redundancy.

Limitations

INSUM system limits:

(cid:129) Maximum 128 INSUM devices per INSUM TCP/IP gateway.

(cid:129)

Four LonWorks subnets per INSUM TCP/IP gateway.

(cid:129) Maximum 32 devices per LonWorks subnet.

(cid:129)

(cid:129)

Circuit breakers (CB) require a special router and cannot be mixed with other 
INSUM devices on the same subnet.

Time Synchronization of the INSUM system via TCP/IP is not supported. 
There is however an INSUM system clock for time synchronization from GPS.

 

Limitations due to CPU load and memory consumption in the AC 800M (verified 
with PM861):

(cid:129) Maximum 128 MCUs (or other INSUM devices) per AC 800M.

(cid:129) Maximum 6 CI857 per AC 800M.

Limitations due to CPU load and memory consumption in the CI857:

(cid:129) Maximum 128 MCUs (or other INSUM devices) per CI857.

(cid:129) Maximum 2 INSUM TCP/IP Gateways per CI857.

Performance

It is possible to start or stop one MCU based on input from another MCU within 
500 ms. It is also possible to start or stop 128 MCUs in one INSUM system and to 
get feedback within 20 s. Note that this includes the time for the messages with the 
feedback after the actual reaction of the MCUs.

3BSE035982-510

77

Section 7  INSUM

INSUM TCP/IP interface units CI857 connect to the CEX bus of the AC 800M.

Twisted pair 10BASE-T Ethernet cable with RJ45 connector. The installation 
should comply with the Category 5 specification according to IEEE 802.3.

The LonWorks bus is integrated in the INSUM system backplane.

INSUM routers and gateways, power supply, motor control units, circuit 
breakers, tier switches and man-machine interfaces are devices belonging to 
the INSUM system.

INSUM routers, gateways and power supplies are connected directly to the 
INSUM backplane. Motor control units, circuit breakers, tier switches and 
man-machine interfaces are connected by means of prefabricated cables.

If the speed and duplex of the network equipment used can be manually 
configured it is recommended to set it to fixed 10 Mbit/s and half duplex. This 
gives the best performance. Both the CI857 and the INSUM TCP/IP Gateway 
use these settings.

 

Hardware

Hardware
(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Troubleshooting

The INSUM TCP/IP CI857 interface units, the INSUM routers and gateways have 
LEDs indicating communication activity and unit error states. The Control Builder 
hardware tree shows the status of the different hardware units. The function blocks 
have outputs indicating error condition and status code.

The system software handling the INSUM communication in the controller writes 
diagnostic information to the controller log. The INSUM TCP/IP Gateway writes 
diagnostic information to a log file that can be fetched with the INSUM OS. The 
INSUM functions in the controller and CI857 have extra log facilities that can be 
enabled by system experts.

78

3BSE035982-510

Section 8  Siemens 3964R

Introduction

Siemens 3964R1 is a rather widespread communication protocol designed by 
Siemens. It is a standard serial point-to-point master/slave protocol. No special 
hardware is required. Siemens 3964R is convenient for communication with 
instruments (e.g. scales) or controllers also using this protocol.

Services Provided

(cid:129) Multiple registers can be read/written.

(cid:129) Multiple I/O bits can be read.

 

(cid:129)

One message can handle a maximum of 512 I/O bits or a maximum of 32 
registers.

(cid:129) Writing of single I/O bits is also supported, with the following limitation: 

Writing of a single I/O bit is done to data block 222, using a special bit 
message which is not implemented in Siemens 3964R. Special application 
software is needed in the Siemens system to handle this. It is possible to change 
the data block via the SiemensBitTransferDB system variable in the controller.

(cid:129) Messages can have 32 registers, but they must not exceed data block 

boundaries. This means that the data blocks in Siemens systems 
communicating with this system are limited to data blocks 3-14.

1. Protocol 3964R can be distinguished from 3964 simply by the presence of the control character (BCC), 

providing more reliable transmission.

3BSE035982-510

79

Design

Section 8  Siemens 3964R

Table 9. Services provided.

Service

Direction

Comment

E message, data type D

Controller to Siemens Request for data, register

E message, data type E, A, M

Controller to Siemens Request for data, byte

E message, data type E, A, M

Controller to Siemens Request for data, bit

E message, data type D, E, A, M Siemens to controller Answer to request for data

A message, data type D

Controller to Siemens Transfer of data, register

A message, data type D

Controller to Siemens Transfer of data, bit

A message, data type D

Siemens to controller Answer to transfer of data

In Table 9, controller means AC 800M acting as the client, and Siemens means 
Siemens PLC as a server.

 

Design

Introduction

Communication is performed via function blocks. The controller sends one read or 
write message to the subsystem and then awaits the answer. This means only one 
message will be outstanding per channel, i.e. master/slave principle

Figure 25 shows a Siemens 3964R network in principle.

Siemens 3964R

PLC1

PLC2

PLCn

Simatic controllers

Figure 25. Siemens 3964R network principle.

80

3BSE035982-510

Section 8  Siemens 3964R

Limitations

Before Siemens 3964R communication can be started, the normal RS-232C 
parameters (baud rate, parity, data bits, stop bits, flow control and delay of the RTS-
signal) must be set for the Control Builder Com port. Refer to the Control Builder 
online help for details (section Serial (Com) Port Settings).

Limitations

(cid:129)

(cid:129)

(cid:129)

The controller can act only as master, i.e. only client functionality is supported 
for Siemens systems.

Only point-to-point communication is possible, i.e. only one slave may be 
connected to each communication channel.

Interpreter RK512 must be installed on the Siemens system (the slave).

(cid:129) Writing of multiple I/O bits is not supported.

Similar to COMLI, see Performance on page 67.

 

Performance

Hardware

Siemens 3964R can be used on the build in COM3 port and optionally on the CI853 
ports. A standard RS-232C/485 communication channel is required.

Cable lengths: 

(cid:129)

(cid:129)

RS-232C: 15m, 

RS-485: 1200m. 

The length can be extended considerably (to several km), using a fiber optic 
converter.

Both 2-thread and 4-thread communication can be used for the RS-485 port.

The CI853 supports Hot Swap.

3BSE035982-510

81

Advanced

Advanced

Communicating Integers

Section 8  Siemens 3964R

Integers can be read and written. The value range for integers fetched from 
controller subsystems is 0-65535, while the range for data words in SIMATIC is -
32768 to +32767. This means that a value between 0 and 32676 in an integer that is 
loaded down to a data word in SIMATIC will be interpreted correctly, while values 
greater than 32767 will be interpreted as negative.

Messages can have 32 integers but must not exceed data block boundaries. This 
means that the data blocks in Siemens systems communicating with a controller 
must keep to data blocks 3-14 (see Table 10).

 

82

3BSE035982-510

Section 8  Siemens 3964R

Communicating Bits

Table 10. I/O-bits, integers and data blocks.

 I/O bits in the 
controller (max 
512/message)

I/O bits in 
Siemens 

Integers 

in the 

controller

Data 

blocks in 
Siemens

Word 
for S5 
system

Word 
for S7 
system

0

1

...

255

256

...

511

...

3071

3 

3

3

3 

4 

4

4

... 

14 

0 

1

...

0

2

...

255 

510

0 

...

255

... 

255 

0

...

510

...

510

Inputs

Outputs

Flag

0

1

...

7

10

...

1777

3000

...

4777

6000

...

11777

0.0 

0.1

...

0.7 

1.0 

...

127.7

 

0.0

...

127.7 

 

0.0

...

255.7

 

Communicating Bits

Groups of bits can only be read, not written. During reading of bit values and 
reading and writing of integer values, communication takes place directly with the 
bit and data block areas in the SIMATIC system. Up to 512 bits per message are 
handled during reading of bits, and up to 32 integers per message are handled during 
reading or writing of integers.

3BSE035982-510

83

Communicating Bits

Section 8  Siemens 3964R

When a large number of bits need to be sent concurrently it is better to use registers 
for the actual transmission and then convert them to and from bits in the controller 
and the SIMATIC system.

When using function block 3964RWrite to write a single bit to the subsystem, the 
controller will pack the type of bit value, the bit number and the new value in a word 
and send it to data word zero in a specific data block in the SIMATIC system.

The message is unpacked by a controller program in the SIMATIC system. This 
program must always be included in the SIMATIC control system. The program 
must be executed often enough to be able to handle a message before the next 
message can arrive from the controller.

Type of data New
value

6

14

 

5

13

Not used

Destination bit 2-0

4

3

2

12

11

10

1

9

0

8

7

15

Destination byte address 15-8
The type of data is defined by bits 7 and 6
Type of data
Input bit
Output bit 
Flag bit

bit 7

bit 6

1
1
0

1
0
1

Figure 26. Code word for the writing of a bit.

The receiving data block number in the Siemens system is set in the controller with 
the system variable SiemensBitTransferDB. The default value is 222 and the range 
1-255.

84

3BSE035982-510

Section 9  MODBUS RTU

Introduction

MODBUS RTU is a standard protocol widely spread because of its ease of use and 
the fact that it supports communication over a wide variety of media, such as wire, 
fiber optics, radio and the telephone.

MODBUS is executed serially and asynchronously according to the master/slave 
principle, and in one direction at a time. However, only master functionality is 
implemented in the AC 800M controller. MODBUS is used mainly for reading and 
writing variables between control network devices, using point-to-point or 
multidrop communication. Message framing is implemented in RTU mode, which is 
a binary format. The MODBUS protocol is designed to transfer data securely by 
checking each byte as well as the entire message for transmission errors.

 

Services Provided

A number of MODBUS commands are supported, see Table 11. The application 
programmer can access the protocol functions through function blocks, according to 
the IEC 61131-5 standard. The protocol software translates the request from 
connect, exception, read, and write blocks into MODBUS protocol commands. 

Table 11. MODBUS protocol commands

Protocol

Description

Protocol

Description

FC1

FC2

FC3

Read coil status

Read input status

Read holding registers

FC6

FC7
FC8(1)

Preset single register

Read exception status

Diagnostic request

3BSE035982-510

85

(cid:129)

(cid:129)

The master channel of a system controls the communication of devices with 
slave function.

A device with slave function is connected via a slave channel and its 
communication is controlled from a master channel.

 

Design

Section 9  MODBUS RTU

Table 11. MODBUS protocol commands (Continued)

Protocol

Description

Protocol

Description

FC4

FC5

Read input registers

Force single coil

FC15

FC16

Force multiple coils

Preset multiple registers

(1) Some slaves do not understand FC8. To avoid problems, set Poll Time to zero (0).

Design

Introduction

Communication with MODBUS takes place serially and asynchronously according 
to the master/slave principle.

Note that a specific device may have some channels specified for a master and 
some for a slave. Consequently the device may act as master in relation to some 
devices and as slave in relation to others. See also Figure 27 & Figure 28 for a 
graphical view of the concept.

Design Examples

Point-to-Point Communication

Point-to-point communication means that only one slave system is connected to the 
master channel, as shown in Figure 27.

Master channel

Slave channel

Figure 27. Master/slave in a point-to-point communication configuration.

86

3BSE035982-510

Section 9  MODBUS RTU

Design Examples

Each channel has a channel definition defining the method of communication. 
Master and slave must not use the same channel number or address for 
communication. However, the channels must be set up in the same way with regard 
to character format and baud rate.

Several slaves may be connected to a controller, but via different serial channels 
(see Figure 28). This network configuration offers higher speed than multidrop 
communication. Communication is controlled in the master by defining a 
communication area which indicates the information the master must transmit to or 
receive from the slave(s).

Master channels

Slave
channels

Slave
channels

Figure 28. Point-to-point communication between a controller and several slaves.

 

Multidrop Communication

Multidrop communication means that several slaves are connected in parallel to the 
serial master channel (see Figure 29). Note that the master can only address one of 
the slaves at a time. Also note that, unlike the point-to-point design, only one RS-
232C channel with an appropriate converter is needed.

Master channel

RS-232C 
converter

Slave
channels

Figure 29. Master/slaves in a multidrop communication configuration.

3BSE035982-510

87

Hardware

Hardware

Section 9  MODBUS RTU

MODBUS RTU can be used on the build in COM3 port and optionally on the CI853 
ports. An RS-232C communication channel is required (and possibly an RS-
232C/485 converter). Maximum cable lengths are 15 m for RS-232C and 1200 m 
for RS-485. Cable length can be extended considerably (to several km) using a fiber 
optic converter.

The CI853 supports Hot Swap.

Performance

Similar to COMLI, see Performance on page 67.

Limitations

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Only master functionality is implemented.

Only RTU mode is implemented (only binary values are used).

Communication using a dial-up modem is not possible.

 

No support for broadcast.

Redundancy

Redundancy is not built in, but can be implemented on application level or physical 
(cable) level by the user, by adding another CI853 module and configure the 
necessary redundant functions in the application program.

Troubleshooting

The operator can monitor the status of all hardware units using the Project Explorer 
in the Control Builder.

88

3BSE035982-510

Section 10  MODBUS TCP

Introduction

MODBUS is an open industry standard protocol that is widely used. It is a request 
response protocol and offers services specified by function codes. 

MODBUS TCP combines the MODBUS RTU with standard Ethernet and universal 
networking standard, TCP. It is an application-layer messaging protocol, positioned 
at level 7 of the OSI model. 

MODBUS TCP is an open Industrial Ethernet network which has been specified by 
the MODBUS-IDA User Organization in co-operation with the Internet Engineering 
Task Force (IETF) as an RFC Internet standard.

Services Provided

 

AC 800M implements Master and the Slave functionality of MODBUS TCP.

The application programmer accesses the protocol functions through standard IEC 
61131-5 function Blocks. 

The Master implementation uses Functions Blocks like Connect, Exception, Read 
and Write to translate the request into MODBUS commands.

The Slave implementation uses Access Variable table for response handling.

3BSE035982-510

89

Design

Section 10  MODBUS TCP

The AC 800M implementation supports the following MODBUS Function Codes:

Table 12. Supported MODBUS Function Codes

Function code

Name

Read coils

Read input discreet

Read multiple registers

Read input register

Write coil

Write single register

Read exception status

Diagnostic

 

Force multiple coils

Write multiple registers

Read file record

Write file record

Read Write file record

FC 1

FC 2

FC 3

FC 4

FC 5

FC 6

FC 7

FC 8

FC 15

FC 16

FC 20

FC 21

FC 23

Design

Introduction

Supported in

Master and Slave

Master and Slave

Master and Slave

Master and Slave

Master and Slave

Master and Slave

Master and Slave

Master and Slave

Master and Slave

Master and Slave

Master

Master

Master

The Communication Interface Module CI867 integrates MODBUS TCP into the 
AC 800M system.

 The CI867 is a dual channel Ethernet Module with ports:

(cid:129)

(cid:129)

Ch1: compliant to IEEE 802.3u standard for the 10/100 Base-T by the Media 
Independent Interface.

Ch2: compliant to IEEE 802.3 standard for 10 Base-T by the 7-wires interface.

90

3BSE035982-510

Section 10  MODBUS TCP

Design Examples

Table 13. Key features of MODBUS TCP implementation for AC 800M

Network Topology

Speed

The MODBUS does not specify any particular Network 
topology. All topologies that can be implemented in standard 
Ethernet (e.g. star, line or tree) including switched Ethernet 
can be used. 

Ch1: 10/100 Mbps, Full duplex (Auto negotiation)
Ch2: 10 Mbps, Half duplex

Maximum Stations per CI867
(sum of Ch1 and Ch2)

Slaves: 70
Master: 8

Design Examples

Figure 30 shows MODBUS TCP network implementation using Ethernet ring 
topology. For details, refer to Automation System Network: Design and 
Configuration (3BSE03446*).

 

3BSE035982-510

91

Design Examples

Section 10  MODBUS TCP

 

Figure 30. Example of a MODBUS network implementation

92

3BSE035982-510

Section 10  MODBUS TCP

Connection Methods

Connection Methods

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Use twisted pair 100BASE-T Ethernet cable with RJ45 connector.

In case of Redundant CI Modules, connect the two CI modules to two different 
switches for better availability. 

The installation need to be compliant with Category 5 specification according 
to IEEE802.3.

Use network hardware as described in ABB document Third Party HW 
products verified for Industrial IT System 800xA(3BSE046579*).

The MODBUS TCP network should be an independent network or connected 
to subnets within 800xA network for security reasons.

Do not connect more than four MODBUS RTU slaves to a single Gateway. 
This number depends on the application and slave response times.

The MODBUS TCP network should not be treated in isolation.The network 
design and IP address allocation need to be done within the overall framework 
of system 800xA. Refer Automation System Network: Design and 
Configuration(3BSE03446*).

 

Connection of MODBUS RTU MODBUS Devices

MODBUS RTU slave devices can be connected to MODBUS TCP network by the 
use of suitable third party Gateways.

Redundancy 

The MODBUS TCP supports the module redundancy. A failover never happens if 
there is a problem with an active port on the backup.

Only one module will be responding at a time. One module will be working as 
primary module while other remains as backup. If the Ethernet link on the primary 
goes down, the module communicates with the Controller and the Controller 
performs a failover to use other module. 

The redundancy scheme is based on switchover of IP address. This causes a 
break in communication during failover.

3BSE035982-510

93

Redundancy

Section 10  MODBUS TCP

It is not possible to get media redundancy by enabling the second Ethernet port 
(Ch2).

The redundancy implementation for Master ensures that the requests from 
applications do not get lost in case of a failure.

The redundancy mechanism for the slave side allows switching the IP address from 
the old primary to the backup in case of a failure on the primary. This makes it 
possible for the slaves to resume communication. Masters that were connected to 
the old primary need to reconnect to the new primary and resend their pending 
requests. 

The backup unit always contains the current configuration of the primary, but it is 
configured as a backup. When controller gives out signal to the backup module for 
transforming as primary module, configuration settings of the backup module will 
be changed as primary configuration. 

See Figure 30 for an example of a redundant implementation. Use a switch with a 
relay connection that is activated when the backup link becomes active. This relay 
connection can be connected to a Digital Input that is read by the AC 800M. In that 
way an alarm/event can be raised when a failing link is detected in the network. 

It is also recommended to not connect any hub / repeater on the link between the 
CI867 Ethernet port and the switch. Doing so increases the failover time if a break 
occurs after the hub / repeater, since break will not be detected by the cable break 
detection. 

 

Do not connect any hub/repeater on the link between the CI867 Ethernet port and 
the switch as it increases the failover time if a break occurs after the hub / 
repeater, since break will not be detected by the cable break detection.

Use only Ethernet port 1 (Ch1) for redundancy as the cable break detection is 
only implemented on Ethernet port 1 (Ch1). 

Examples of faults that will be covered:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Hot remove of CI867

Internal fault on CI867

Cable break between CI867 and first closest switch

The switch closest to CI Module fails

94

3BSE035982-510

Section 10  MODBUS TCP

Online Upgrade

Online Upgrade 

By using Online Upgrade functionality, you can upgrade a redundant CI867 without 
stopping the process. 

To upgrade the CI867 module in a redundant network:

1. Disable the redundancy.

2. Upgrade the backup CI867.

3. Without stopping the process, make the upgraded CI867 as active module.

4. Upgrade the CI867 having old software.

5. When both CI867 modules are upgraded with new software, enable 

redundancy.

During the online upgrade the process should be put in a steady state. No critical 
operation should be performed during the upgrade.

The CI867 supports Online Upgrade. The CI867 will be restarted during Online 
Upgrade. This will be done even if only the Controller firmware is upgraded. During 
restart, no internal status will be transferred and communications will be 
disconnected.

 

Limitations

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Ch1 and Ch2 must be connected on two different sub nets.

Ch2 does not support cable break detection feature. Do not use it in redundant 
networks.

The maximum message size for write is 1968 bits or 123 registers.

The maximum message size for read is 2000 bits or 125 registers.

3BSE035982-510

95

Performance

Section 10  MODBUS TCP

Performance

The Master functionality is implemented using Function Blocks like Connect, Read 
and Write. The execution interval of these function blocks, the number of function 
blocks, and type of data being communicated (that is, coils or registers), determines 
the communication throughput.

The peak throughput of MODBUS TCP is dependent on if the CI867 is used as a 
Master or Slave.

The peak throughput is about 150 requests per second if a single CI Module as 
Master is connected to AC 800M. In case of multiple CI Modules the requests per 
second per CI Module may be reduced depending on the cycle time of the task and 
the number of function blocks (the figure is about 120 requests per second for two 
CI867s)

The peak throughput is about 20 transactions per second if a single Master is 
connected to CI867. The figure is about 10 transactions per second when 8 Masters 
are connected to a single CI867.

The task time used should be more than 250 ms to achieve high throughput, 
especially when a large number of function blocks (or slaves) are connected.

 

The transmission of registers loads the AC 800M less than coils. This is because the 
coil data needs to be packed and unpacked in the controller.

The typical load on the controller when a single CI867 is used as a Master (cycle 
time of 250 ms):

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Single slave with 50 register data length is about 6%

30 slaves with 50 register data length is about 8%.

Single slave with data length of 525 coils is 6%

30 slaves with data length of 525 coils is 9%.

96

3BSE035982-510

Section 10  MODBUS TCP

Hardware

The typical load on controller when a single CI867 is used as a Slave:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Single Master communicating 50 byte message is about 4%

8 Masters communicating 50 byte message is about 12%

Single Master communicating a single coil is about 4%

8 Masters communicating message length of 525 coils is about 22%

The CI867 Master sends a single request to each connected slave, and each CI867 
slave can store up to 60 requests. 

The total number of requests that can be send by CI867 Master to all the slaves at 
the same time is limited to 1120.

Limitations for function blocks

The Master/Slave functionality has the following limitations for function blocks:

 

The total number of function blocks for all slaves put together must not exceed 
1120.

The total number of function blocks per slave must not exceed 60.

(cid:129)

(cid:129)

Hardware 

The maximum number of CI867 connected per controller is 12 non-redundant units 
or 6 redundant units. 

Troubleshooting 

The CI867 device status, watchdog supervision, controller log, and CI log are 
reported to the AC 800M controller for displaying in the Control Builder.

3BSE035982-510

97

Troubleshooting

Section 10  MODBUS TCP

 

98

3BSE035982-510

Section 11  AF 100

Introduction

Advant Fieldbus 100 (AF 100) is a high performance fieldbus, which is used for:

(cid:129)
(cid:129)

Communication between Advant Controllers.
Communication between Advant Controllers and S800 I/O Stations, AC 800M 
controllers, and so on.

It is possible to reach up to 80 stations within a total physical distance of up to 
13300 meters (43300 feet). 

Advant Fieldbus supports three transmission media:

(cid:129)
(cid:129)
(cid:129)

Twisted pair (Twp)
Coaxial (RG59 and RG11)
Optical.

 

A bus can be built up with all the three media, where a part of one kind of media is 
denominated segment.

The following rules apply to the segments:

(cid:129)

(cid:129)

To each twisted pair segment, 32 stations can be connected and the maximum 
segment length is 750 meters (2500 feet)

The coaxial segment can be:




300 meters (1000 feet) with cable RG59 or
700 meters (2300 feet) with cable RG11.

3BSE035982-510

99

Services Provided

Section 11  AF 100

(cid:129)

(cid:129)

The optical media is only used in point-to-point communication, and allows the 
total length of a bus segment to be up to 1700 meters (5500 feet).

By using back-to-back coupled optical segments, it is possible to reach a 
physical length of 13300 meters (43300 feet). 

An Advant Fieldbus 100 may be installed with one or two physical bus lines (single 
or redundant media). Two bus lines are chosen when increased availability is 
required. The redundant bus line does not enhance the bus bandwidth when both bus 
cables are operating.

For more details about AF 100, refer to Advant Fieldbus 100 User Manual 
(3BSE000506*).

Services Provided

The communication interface - CI869 - is a CEX Module attached to the AC 800M 
controller that provides connectivity to other AC 800M, AC 160 or connectivity 
server over AF 100. An AC 800M controller with the communication interface 
CI869 behaves as an AF 100 station, receiving data from other AF 100 
stations/devices.

Two CI869s can operate as a pair, where one is Primary and the other is Backup in 
AC 800M controller configuration.

 

Design

The controllers (Advant Controller 70, Advant Controller 100 Series, Advant 
Controller 400 Series, and AC 800M) and other AF 100 Stations can be connected 
as stations on Advant Fieldbus 100. The AF 100 Stations comprise, for example, 
AC 100 OPC Server and S800 I/O Station. The AC 100 OPC Server together with 
800xA for AC 100 provides a wide range of functionalities and when connected to 
Advant Fieldbus 100, it works as a PC-based operator station. S800 I/O Station is a 
remote I/O station.

CI869 does not support peer-to-peer communication with S800 I/O Station.

The  Advant Fieldbus 100 provides communication between Advant Controllers 
and AF 100 Stations. 

100

3BSE035982-510

Section 11  AF 100

Design

The Advant Fieldbus 100 supports two different kinds of communication:

(cid:129)

Process dataDynamic data used to monitor and control a process

(cid:129) Message transferUsed for parameters, program loading, and diagnostic 

purposes. 

An Advant Fieldbus 100 network is installed with single or redundant cables. 
In configurations with redundant cables, the data is always transmitted on both 
cables, but the receiver selects the cable to receive the data. This is done 
automatically by the hardware.

Advant Fieldbus 100 is a high performance fieldbus which can be used to connect 
up to 80 Advant Controllers and/or AF 100 Stations (see Figure 31).

 

3BSE035982-510

101

Design

CI522
Two Communication
Interfaces for
AC 400 Series

TC516
Modem

TC516
Modem

TC514
Modems

Section 11  AF 100

Advant
Controller 400
Series

CI869

AC 800M

AC 70

PC with
OPC Server

CI527A
Communication
Interface for
OPC Server 
(board installed
in the PC)

Twisted
Pair

Coaxial
Cable

TC514
Modems

TC513
Modems

TC625
Modems

l

e
b
a
C

t

o
p
O

Interfaces (FCIs)
with Redundant
S800 I/O Station

 

CI627/CI631
Two Communication
Interfaces for
AC 100 Series

Tap
Cable

Advant
Controller 100
Series

I

C
8
2
0

T
B
8
1
5

I

C
8
2
0

I
/

 

O
M
o
d
u
e
s

l

AC 70

AC 70

S800 I/O
Station

Twisted
Pair

Twisted
Pair

Grounded Terminator
Terminator (not grounded)

AC 70

Other
AF 100 Stations

Figure 31. Network Overview of AF 100 with one Redundant media bus and one 
Single media bus

102

3BSE035982-510

Section 11  AF 100

Process Data Transfer

The allowed station numbers for Advant Controller 400 Series and 
AC 100 OPC Server are 1 to 80. For other controllers and AF 100 Stations, station 
numbers 1 to 79 are allowed.

Process Data Transfer

Process Data Transfer is managed through Cyclic Data Packets (CDPs). Each CDP 
is configured on the communication interface for a certain signal identity, cycle 
time, size and direction. 

The process data represented by a CDP is always transferred cyclically on the 
Advant Fieldbus 100. 

The signal identity is the common identifier for corresponding send and receive 
CDPs on the bus. Each CDP has a unique signal identity among the sending CDPs. 
Several receiving CDPs, however, can have the same signal identity, if they are 
situated in different communication interfaces.

The cycle time determines how often the data of the CDP is transferred on the bus. 
When a CDP is transferred on the Advant Fieldbus 100, the interval between 
consecutive transfers is always the same (the cycle time). Thus the process data 
transfer does not depend on other tasks that the communication interfaces perform. 

 

The number of data-bytes determines the size of data transferred on the bus. The 
possible sizes are 2, 4, 8, 16 and 32 bytes. The size of the CDP must be equal at the 
sending and receiving ends. Unless both the size and the signal address of 
corresponding CDPs are correct, no transmission is performed. 

The direction of the CDP determines whether it is a sending or receiving CDP.

CDPs define a broadcast mechanism where the data contained in one CDP (a 
sending CDP) is transferred cyclically to another CDP (a receiving CDP), situated 
in another communication interface in the network. The broadcast mechanism 
allows several receiving CDPs to be configured to receive data from the same 
sending CDP (see Figure 32).

3BSE035982-510

103

Message Transfer

Section 11  AF 100

Advant Fieldbus 100

SEND

CDP

RECEIVE

RECEIVE

CDP

CDP

Advant Controller

Advant Controller

AF 100 Station

Figure 32. Process Data Transfer

Message Transfer 

Message transfer is a point-to-point communication and is sent on request from one 
station to another station on the AF 100 bus.

Message transfer is used for the transfer of identification data, configuration data, 
and events between stations on the bus.

 

Bus Master Function 

Both process data and message transfer requires an active bus master. 
The bus master function controls all the transmission on the Advant Fieldbus 100, 
while reception of data is controlled locally on the individual communication 
interface. 

In an Advant Fieldbus 100 network with one or more communication interfaces, 
one of these functions as bus master while the other communication interfaces are 
active with supervising that the bus master operates correctly. 

The bus master responsibility is passed over to the next communication interface on 
the bus approximately every second. All the attached communication interfaces with 
bus administration function share the bus master responsibilities. 

As long as the communication interfaces that are attached to the 
Advant Fieldbus 100 are operational, the bus master function ensures that the 
process data flows on the bus and that the message transfer is possible. 

104

3BSE035982-510

Section 11  AF 100

Network Configuration

To ensure a high data availability on the bus, the bus administrators should have as 
low station address as possible. Each bus administrator supervises that it obtains the 
master frames on the bus every millisecond. If it does not obtain the master frames 
for (8 + 2 * own station address) milliseconds, the bus administrator becomes the 
bus master.

When redundant CI522s, CI869s, and CI820s are used on the bus, then one of the 
following rules must be followed:





The redundant CI522 pair must be assigned a station number lower than 
five (5). 
Two master defined communication interfaces must be assigned station 
numbers lower than five (5).

There are no specific rules for redundant CI630/CI631, but low station numbers 
are recommended for bus masters.

Network Configuration 

When a new Advant Controller and/or AF 100 Station is connected to the Advant 
Fieldbus 100, it is automatically recognized and the new element participates in the 
communication as it is configured. In the Advant Controller 400 Series, the 
supervision of desired remote stations must be configured. 

 

The starting, stopping, and restarting of stations can also be done without disturbing 
the traffic on the Advant Fieldbus 100, if some precautions are taken.

However, the communication interfaces of Bus Administrator must know the 
configuration of all sending CDPs in the network in order to perform the bus master 
function. Therefore, the information must be distributed to all AF 100 nodes with 
bus master capabilities when there is any change in the configuration of 
sending CDPs.

Only sending CDPs need to be considered, as the configuration of receiving CDPs 
can be controlled locally in communication interface of the receiving CDPs. 

The communication interfaces with Bus Administrator capabilities maintain a scan 
table containing information about all sending CDPs and when they must be 
transmitted on the Advant Fieldbus 100. When the configuration changes, the scan 
table is regenerated.

3BSE035982-510

105

Online Upgrade

Section 11  AF 100

The distribution of information is always performed by the communication interface 
in which the sending CDP is configured. This is done automatically whenever a 
sending CDP is defined, deleted, or updated. 

Online Upgrade 

CI869 supports Online Upgrade. This allows the upgrade of the CI869 firmware 
when the application is running in the controller (online mode).

During the online upgrade, the process should be put in a steady state. No critical 
operation should be performed during the upgrade.

When the Online Upgrade is performed with redundant CI869s, the 
communication through CI869 is interrupted only during the switchover of the 
redundant processor modules connected to the two CI869s. 
When the Online Upgrade is performed with single CI869, the communcation 
through CI869 is interrupted from the time the processor module switchover 
starts till the CI869 is upgraded with the new firmware.

For more information on Online Upgrade, refer to System 800xA Control, AC 800M, 
Configuration (3BSE035980*) manual.

 

Hardware 

The maximum number of CI869 connected per AC 800M controller is 
12 non-redundant units or 6 redundant units. 

Troubleshooting 

The CI869 device status, watchdog supervision, controller log, and CI log are 
reported to the AC 800M controller for displaying in the Control Builder.

Double-click any hardware unit to see the corresponding status message in the 
Control Builder. These messages are useful for troubleshooting.
The crash logs are useful for troubleshooting and contains crucial information for 
analyzing malfunctions. 

106

3BSE035982-510

Section 12  MOD5-to-MOD5

This section provides the information specific to the MOD5-to-MOD5 
communication protocol and the MOD5 communication interface, CI872. 

Introduction

MOD5-to-MOD5 protocol is a proprietary communication protocol that is used to 
enable peer-to-peer communications between MOD5 process control systems and 
AC 800M controllers. It provides a redundant serial communication over fiber-optic 
links, using a request and response mechanism.

Services Provided

 

The protocol consists of request and response messages that are exchanged each 
second. 

The requests sent to other connected systems are determined by the control 
application. The response sent at each second is determined by the requests received 
at the previous second from other connected systems. The application programmer 
accesses the protocol functions through standard function blocks. 

The implementation uses the functions blocks MTMConnect, MTMReadCyc, 
MTMDefCyc, and MTMDefERCyc to translate the request and to answer the 
MOD5 commands.

3BSE035982-510

107

Design

Design

Section 12  MOD5-to-MOD5

The MOD5 communication interface module, CI872, helps the communication 
between MOD5 controllers and the AC 800M controller. 

The CI872 modules are supported by the AC 800M controllers.

The CI872 has three pairs of full duplex fiber optic ports for connection to MOD5 
controllers. One CI872 is intended to communicate with up to three left MOD5 
controllers or three right MOD5 controllers. For redundancy, it is necessary to use 
two CI872 modules. 

In order to handle 12 redundant MOD5 controllers, a total of four pairs of CI872 
should be deployed.

Table 14. Design Specifications for MOD5 Implementation with AC 800M 

Speed

500 kbps

Three (or three pairs in case redundant modules).

Refer Table 15, Figure 33, Figure 34, Figure 35.

The combined maximum number of MTMReadCyc, MTMDefERCyc, and 
MTMDefCyc function blocks that can communicate per port is five. These can 
be spread over multiple applications.
In the above limit of five function blocks, the maximum number of 
MTMDefCyc and MTMDefERCyc function blocks that can communicate per 
port is three, with a maximum of 100 variables per MTMDefCyc or 
MTMDefERCyc function block. 

 

Refer Figure 33.

Maximum remote 
MOD5 controllers 
per CI872

Connection 
Topology

Recommended 
Connection 

Limitations for 
function blocks per 
port of CI872

108

3BSE035982-510

Section 12  MOD5-to-MOD5

Connection Examples

Connection Examples

Figure 33 shows an example of MOD5 to AC 800M connection.

 

Figure 33. Example of a MOD5 to AC 800M Connection

3BSE035982-510

109

Configuration Considerations

Section 12  MOD5-to-MOD5

Configuration Considerations

Consider the following while configuring CI872:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

The supported configuration is maximum four redundant pairs of CI872 
enabling communication to 12 redundant MOD5 controllers.

CI872 can be used in a non-redundant mode but the number of CEX-bus 
modules connected to the controller is limited to four. 

CEX-bus segment A (upper) communicates to all left MOD5, and segment B 
(lower) communicates to all right MOD5 controllers. A CI872 configured as a 
single module is located last in CEX segment A. The left/right communication 
to MOD5 shall be configured as per Table 15.

BC810 is required to ensure full controller redundancy and Online upgrade. 
See Figure 34 and Figure 35.

If BC810 is not used, connect the CEX-bus cable to ensure controller 
redundancy. See Figure 36.

 

Table 15. Recommended Positions of CI872 in Different Hardware Configurations

Possible Hardware Configuration

Recommended CI872 Positions(1)

AC 800M PA non-redundant, CI872 non-
redundant

Positions 1, 2, 3, 4

AC 800M PA non-redundant, CI872 redundant

Positions 1(2), 3(4), 5 (6), 7(8)

AC 800M PA redundant, CI872 non-redundant

Positions 1, 2, 3, 4

AC 800M PA redundant, CI872 redundant

Positions 1(7), 2(8), 3(9), 4(10)

AC 800M HI, CI872 non-redundant

Positions 2, 3, 4, 5

AC 800M HI, CI872 redundant

Positions 2(8), 3(9), 4(10), 5(11)

Positions within parenthesis indicate the positions in lower segment when CIs are connected to Redundant Controller. 
If the both the Primary and Backup CI module are connected consecitively to the same side of Controller, the module 
connected at lower CEX bus position is LEFT system and the one at higher CEX bus position is RIGHT system.

(1) These recommended positions assume that only CI872 is used with the AC 800M controller.

110

3BSE035982-510

Section 12  MOD5-to-MOD5

Configuration Considerations

Figure 34. Maximum Configuration Using PA Controller 

 

Figure 35. Maximum Configuration Using HI Controller

3BSE035982-510

111

Module Redundancy

Section 12  MOD5-to-MOD5

Figure 36. Redundant Connection Using CEX-bus Cable

Module Redundancy

 

CI872 supports module redundancy. The backup CI872 takes over as the primary 
module in case of a hardware failure in the primary CI872.

The redundant system ensures that the requests from IEC 61131 standard 
applications are not lost in case the primary CI872 fails. 

During failover, there is a loss of data for maximum 3 to 4 cycles (in case of 
removal of a module) or 6 to 8 cycles (in case of removal of a fibre optic cable in 
the module). When cyclicity of the function blocks is one second, this results in a 
loss of data for 3 to 4 seconds or 8 to 10 seconds in the IEC 61131 standard 
application.

See Figure 33 on page 109 for an example of a redundant implementation.

Any of the following situations can occur while receiving data from both the 
primary and the backup:

1. A hardware failure can cause defects in the operations of primary CI872 

module due to one of the following reasons:

a.

The primary CI872 has been hot removed.

b. A fault detected in the primary CI872.

112

3BSE035982-510

Section 12  MOD5-to-MOD5

Module Redundancy

c. A break in the cable of the primary CI872 for any of the ports.

2. A communication failure can occur due to any of the following errors in the 

data from the primary:

a.

There is a framing error.

b. There is checksum or parity error.

c. One request and response cycle exceeds the threshold of one second.

In case of a hardware failure, a switchover happens from the primary CI872 module 
to the backup CI872 module. In case of a communication failure, a switchover does 
not happen.

The time taken by the firmware to complete the failover is dependent on the 
Detection time, HWStatus update cycle time, and the Reaction time. 

The maximum failover time is: 

Detection time + Reaction time + HWStatus Update cycle time

where:
Detection time: Time taken by the controller to detect the failure of the primary 
module.

 

Reaction time: Time taken by the controller to complete a switch over from the time 
a failure was detected.
HWStatus update cycle time: HWStatus parameter is found on the hardware tree 
unit for the PM. This value is provided by the user and the minimum value is 
500 ms.

Double-click the AC 800M controller in the hardware tree to open the configuration 
parameters window. To modify HWStatus parameter, select the parameter in the 
configuration parameters window, and enter the required values. See Figure 37.

3BSE035982-510

113

Online Upgrade

Section 12  MOD5-to-MOD5

Figure 37. Configuration Parameters Window

Online Upgrade

 

CI872 supports Online Upgrade. This upgrade functionality allows the user to 
upgrade the CI872 firmware when the application is running in the controller 
(online mode).

During an Online Upgrade, the communication between the CI872 module and 
the connected MOD5 controller is interrupted.

For more information on Online Upgrade, refer to System 800xA Control, AC 800M, 
Configuration (3BSE035980*) manual.

114

3BSE035982-510

Section 12  MOD5-to-MOD5

Troubleshooting

Troubleshooting

Double-click any hardware unit to see the corresponding status message in the 
Control Builder. These messages are useful for troubleshooting.
The crash logs are useful for troubleshooting and contains crucial information for 
analyzing malfunctions. 

 

3BSE035982-510

115

Troubleshooting

Section 12  MOD5-to-MOD5

 

116

3BSE035982-510

Section 13  EtherNet/IP and DeviceNet

Introduction

EtherNet/IP is an application layer protocol built on the standard TCP/IP protocol 
suite used to communicate high level industrial devices. DeviceNet is also 
application layer protocol built on the standard CAN used to communicate low-level 
industrial devices. 

Both are based on CIP (Common Industrial Protocol) and hence share all the 
common aspects of CIP.

DeviceNet devices connect to EtherNet/IP devices through the linking device, 
LD800 DN.

Services Provided

 

The CI873 EtherNet/IP-DeviceNet hardware Library, CI873EthernetIPHWLib, 
integrated with AC 800M consists of the communication interface (CI873 with two 
Ethernet ports) and other hardware types to be used when configuring EtherNet/IP 
and DeviceNet.

The services provided by EtherNet/IP-DeviceNet implementation are:

(cid:129)
(cid:129)

(cid:129)
(cid:129)
(cid:129)
(cid:129)
(cid:129)
(cid:129)

Configuring CI873 as EtherNet/IP scanner.
I/O communication with DeviceNet devices using Class 1 connection to 
LD800 DN.
Status supervision of devices.
Hot swap of CI873, LD800 DN and DeviceNet devices.
System command to change the Run/Idle state of LD800 DN.
Logging of CI messages.
CI873 Scanner diagnostics.
LD800 DN Scanner diagnostics.

3BSE035982-510

117

Design

Section 13  EtherNet/IP and DeviceNet

(cid:129)
(cid:129)

CI873 Firmware Upgrade.
Online upgrade for CI873 Firmware.

Design

The CI873EthernetIPHWLib Hardware Library is a part of the 
EtherNet/IP-DeviceNet integration in the 800xA System.

EtherNet/IP-DeviceNet is configured using the Control Builder. The configuration 
includes the planning of the hardware units in the hardware tree, specific 
configuration for the EtherNet/IP-DeviceNet communication interface CI873 and 
the DeviceNet devices. The device specific configuration data is described within 
the DeviceNet EDS file provided by the device manufacturer. To configure the 
DeviceNet device within the Control Builder, the EDS file must be imported into a 
hardware library and inserted to the project using the Device Import Wizard.

 

118

3BSE035982-510

Section 13  EtherNet/IP and DeviceNet

Design Example

Design Example

Figure 38 shows an example of EtherNet/IP-DeviceNet installation with AC 800M 
controller.

 

Figure 38. Connection of EtherNet/IP and DeviceNet devices with AC 800M

Limitations

The limitations are:

(cid:129)

(cid:129)

CI873 supports CH1 Ethernet interface with a speed of 100 Mbps. CH2 is not 
supported.

A maximum of 4 non redundant CI873 can be connected to each AC 800M 
controller.

3BSE035982-510

119

Performance

Section 13  EtherNet/IP and DeviceNet

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

A maximum of 4 LD800DN linking devices can be connected under one 
CI873.

The maximum number of IO modules supported per Modular Adaptor device 
is 10.

The maximum number of configuration parameters supported per device is 
100.

The maximum number of input bytes supported by LD800DN is 496 bytes. 
This is the total input bytes, calculated as the sum of all the enabled Input 
connection size for all the DeviceNet devices under one LD800DN.

The maximum number of output bytes supported by LD800DN is 492 bytes. 
This is the total output bytes, calculated as the sum of all the enabled Output 
connection size for all DeviceNet devices under one LD800DN.

To configure the DeviceNet devices, the LD800DN has a maximum 
configuration memory of 130560 bytes. This is the sum of all the configurable 
parameter size of all the DeviceNet devices under one LD800DN. ADR will 
not be supported for the DeviceNet devices which cannot be accommodated in 
the above memory. The Control Builder will show a warning for the DeviceNet 
devices for which the ADR will not be supported.

 

Performance

The time taken from changing an input channel to the time of setting an output 
channel is 240 ms.

For more information, refer to the AC 800M, Ethernet/IP DeviceNet, Configuration 
(9ARD000014*) manual.

120

3BSE035982-510

Section 14  IEC 61850

Introduction

The IEC 61850 for Substation Automation System (SAS) defines communication 
between intelligent Electronic Devices (IED) in the substation and other related 
equipment. The IEC 61850 standard itself defines the superset of what an 
IEC 61850 compliant implementation might contain.

Services Provided

AC 800M with the communication interface CI868 is modeled as an IED receiving 
data from other IED's to the 1131 variables and sending data from its own 1131 
variables to other IED's as per the IEC 61850 data modeling. This is achieved using 
the IEC 61850 hardware library. See Figure 39.

According to the IEC 61850 Data model the following could be said:

 

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

An IED is a host for one or more Servers or access points (AC 800M).

A Server or access point has one or many Logical Devices (CI868).

A Logical Device has one or many Logical Nodes.

A Logical Node has one or many Data Objects.

A Data Objects has one or more data attributes.

3BSE035982-510

121

Design

Section 14  IEC 61850

 

Figure 39. Communication Interface CI868

Design

Introduction

The Communication Interface Module CI868 integrates IEC 61850 into the 
AC 800M system. For more information refer to Industrial IT, AC 800M IEC 61850 
Engineering & Configuration (9ARD171385*).

The CI868 is a single channel Ethernet Module with ports:

(cid:129)

Ch1: compliant to IEEE 802.3u standard for the 10/100 Base-T by the Media 
Independent Interface.

122

3BSE035982-510

Section 14  IEC 61850

Design Examples

Table 16. Key features of IEC 61850 implementation for AC 800M

Network Topology

The IEC 61850 specifies the usage of ring network.

Speed

Ch1: 10/100 Mbps, Full duplex (Auto negotiation)

Maximum IEDs per CI868
(Ch1)

IED: 80

Design Examples

Figure 40 shows Example of IEC 61850 network implementation.

 

Figure 40. Example of IEC 61850 network implementation

3BSE035982-510

123

Connection Methods

Section 14  IEC 61850

Connection Methods

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Use twisted pair 100BASE-T Ethernet cable with RJ45 connector.

In case of Redundant CI868 implemented through IEC 61131 application, 
connect the two CI modules to different switches for better availability.

The installation need to be compliant with Category 5 specification according 
to IEEE802.3.

Use network hardware as described in ABB document Third Party HW 
products verified for Industrial IT system 800xA (3BSE046579*).

The IEC 61850 network should be an independent network for security 
reasons.

The IEC 61850 network should not be treated in isolation.The network design 
and IP address allocation need to be done within the overall framework of 
system 800xA. Refer Automation System Network: Design and Configuration 
(3BSE03446*).

Redundancy

 

Module Redundancy by IEC 61131 Application Logic

Application redundancy is achieved by using two CI868 modules namely, AC 800M 
with two access points, connected in the same sub network and cable redundancy 
using external switches which supports rapid spanning tree protocol.

(cid:129)

(cid:129)

(cid:129)

User creates a Feeder Block Diagram with the sending logical nodes in IET 
tool and connects the FBD to one Access point, copies the same FBD and 
connects to the second access point which is in the same sub network as the 
first one.

User exports the configuration to communication configuration tool and creates 
same datasets under LN0 for the two access points.

User creates the same input under LN0 of the access points by dragging the 
subscribed IED to the two access points respectively.

(cid:129) Wizard creates the tree structure with two CI868 in the Control builder.

124

3BSE035982-510

Section 14  IEC 61850

Online Upgrade

(cid:129)

(cid:129)

User creates an application to receive data from one access point and switch to 
another access point data in case of channel error or CI868 failure.

Application writes the data to both the access points but read from only one of 
the two access points.

Online Upgrade

The CI868 supports Online Upgrade. The upgrade is done via Online Ugrade option 
available in CBM Hardware Tree for controller. The online upgrade is applicable for 
redundant AC800M controllers with CI868. While CI868 firmware upgrade, 
communication is disrupted.

Limitations

Capacity of IEC 61850 solution using CI868

 

Table 17. Capacity of IEC 61850 solution using CI868

Limitations 

Max Limit

Comments

Max LN's per access point

Max CDC groups per CI868

253

254

Max # of Data Attributes 
supported in a receiving 
CI868 will be 254 * 5 = 
1270.

Max LD's per access point

10

Max Access Points per Controller

4 (1 access point 
per CI868)

non-redundant units

Max Connected IEDs to one access 
point

80

3BSE035982-510

125

Performance Limitations of CI868

Section 14  IEC 61850

Table 17. Capacity of IEC 61850 solution using CI868 (Continued)

Limitations 

Max Limit

Comments

Max Datasets (Receive and Send) 
in one Access Point

max GOOSE 
datasets
Receive: 150/s
Send: 60/s

Can be split across 
multiple LDs

Max Data Attributes per DataSet

150

Max Send Data attributes under all 
LNs in one Access point

5500

Max Data Attributes under one 
access point (both Send & Receive)

10500

Not implemented

Performance Limitations of CI868

The CI868 is capable of receiving 157 analog values (15 datasets of 10 analog 
values each OR 50 datasets of 3 analog values each) every 500ms.

CI868 is capable of sending 30 analog values (3 datasets of 10 analog values each) 
every 500ms.

 

126

3BSE035982-510

Section 14  IEC 61850

Performance 

Diagnostic Performance Channels on CI868

Performance

 

Figure 41. Diagnostic Performance Channels on CI868

The following diagnostics information in the 1131 variable connected to the 
channels or in the application where those 1131 variables are used. See Figure 41. 
The transmission and reception is independent of CPU load.

Values Received

Number of GOOSE values received from other IEDs since the start.

Values Sent

Number of GOOSE values sent to other IEDs since the start.

3BSE035982-510

127

Hardware

Section 14  IEC 61850

Values Received Per Second

Number of GOOSE values received from other IEDs per second. Averaged over 64 
seconds (Number of messages received are measured over 64 seconds and averaged 
it for a second).

Values Sent Per Second

Number of GOOSE values sent to other IEDs per second. Averaged over 64 seconds 
(Number of messages sent are measured over 64 seconds and averaged it for a 
second)

Data Subscribed

CI868 can subscribe to GOOSE data from up to 80 IEDs.

CPU Load

CPU load of the module in percentage updated every minute.

 

Sender Cycles per Second

Number of times the sender task has traversed the send list containing the Data 
object to be sent out on change.

Hardware

The maximum number of CI868 connected per controller is four non-redundant 
units or two units are available in case of application redundancy.

Troubleshooting

The CI868 device status, watchdog supervision, controller log, and CI log are 
reported to the AC 800M controller for displaying in the Control Builder.

128

3BSE035982-510

Section 15  Self-defined Serial Communication

Introduction

Function blocks in the Serial Communication Library (SerialCommLib) allow 
implementation of a personal character-oriented protocol on a serial port and 
writing an application that both controls the characters sent and checks that the 
correct answer is received by using various checksum algorithms.

The typical application areas are the following:

Read characters from an input device, such as a bar code reader.

Read and write from/to a terminal.

Implement simple serial communication protocols.

Print alarm texts on a printer. 

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Design

 

The SerialCommLib library supplies IEC-1131 function blocks that make it 
possible to read and write a string value from/to a COM port on a hardware 
interface. The following function block types are available:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

SerialConnect - Creates and performs a setting, and also opens and closes a 
serial channel.

SerialSetup - Changes settings that belong to a serial channel (for example 
checksum calculation and settings for echo handling at sending and receiving).

SerialWriteWait - Writes a string and expects a reply (a string) from the unit it 
communicates with.

SerialListenReply - Receives a string and then writes a string to the unit it 
communicates with.

3BSE035982-510

129

Hardware

Section 15  Self-defined Serial Communication

(cid:129)

(cid:129)

SerialWrite - Writes a string to the unit it communicates with.

SerialListen - Receives a string that has been written from the unit it 
communicates with.

The parameter Channel of the SerialConnect function block is used for addressing 
the COM port which is used for the communication. Use one and only one 
SerialConnect for each COM port. Every function block has an Id parameter and all 
function blocks are connected to each other via the Id parameter.

Hardware

Self-defined Serial Communication can be used on the built in COM3 port (on an 
AC 800M Controller) and optionally on the CI853 ports. The CI853 supports Hot 
Swap.

Performance

The performance of the Self-defined Serial Communication depends of the way the 
information is handled, and it is not possible to make general statements.

 

Limitations

(cid:129)

(cid:129)

(cid:129)

(cid:129)

The maximum size of a string to be received/sent is limited to 140 characters.



Please observe that a message often includes a Checksum part or end 
character and sometimes character after end character, which also have 
to fit in the 140 character message.

The serial protocol can only be executed in half duplex. Accordingly it cannot 
send and receive simultaneously.

A maximum of one function block enabled on each channel.

Function blocks connected to a SerialConnect function block can only be active 
one at a time. This means that the communication channel is busy until the 
activities of the current function block have been completed.



Exception: Two SerialWrite function blocks can be combined in order to 
print a longer string than 140 characters, see Advanced on page 131.

130

3BSE035982-510

Section 15  Self-defined Serial Communication

Redundancy

(cid:129)

(cid:129)

An enabled SerialListen will block a SerialWrite.

Preferably use ASCII telegrams, since binary telegrams are difficult to 
implement, but possible.

Redundancy

Redundancy is not supported.

Advanced

To be able to print a string longer than the maximum length of 140 characters, call 
to subsequent SerialWrite function blocks in order like following:
Write1( Req := TRUE,

Id := Id, 

EndChar := EndChar_Write1, 

 

Done => Done_Write1, 

Error => Error_Write1, 

Status => Status_Write1, 

Sd := Sd_Write1 );

Write2( Req := TRUE, 

Id := Id, 

EndChar := EndChar_Write2, 

Done => Done_Write2, 

Error => Error_Write2, 

Status => Status_Write2, 

Sd := Sd_Write2 ).

3BSE035982-510

131

Troubleshooting

Section 15  Self-defined Serial Communication

Troubleshooting

There is a Status parameter which can be a good guide when tracking errors. The 
status codes are listed and described in Control Builder online help.

Note that the duration of the Error and Done parameters is a pulse during one scan 
only. Therefore latching in the application is required to keep these signals.

If there is a power fail on the AC 800M unit while the SerialListenReply is treating a 
message, the error status -5331 appears. To restart the serial communication, disable 
the function block and enable it again.

 

132

3BSE035982-510

Section 16  FOUNDATION Fieldbus HSE

Introduction

Advantages

FOUNDATION Fieldbus (FF) is a bi-directional protocol used for control system 
communication and meets ISA SP50 requirements. It is a fieldbus used for 
communication with distributed I/O units and fulfills the regulations and safety 
demands in high risk (explosive) environments, and supports process control 
without involving a controller. It is an open protocol, which means that devices from 
different certified manufacturers are compatible (interoperability). 

FF defines two communication profiles, H1 and HSE. The H1-Profile with a data 
transmission rate of 31.25 kbit/s is preferably used for direct communication 
between field devices in one link (H1 link). The HSE profile with a transmission 
rate of 100 Mbit/s serves first and foremost as a powerful backbone for the link 
between H1 segments. FF linking devices serve as a gateway between the field 
devices on the H1 segments and the HSE backbone.

 

(cid:129)

(cid:129)

(cid:129)

Control in the field
The FOUNDATION Fieldbus specification is uniquely different from other 
networking technologies in that it is not only a communication protocol but 
also a programming language for building control strategies which are 
distributed into the field devices. The control can be kept within the devices. In 
this case the number of controller can be drastically reduced.

Scheduled operation
The execution of function blocks and transmission on H1 is deterministic and 
synchronized.

Redundancy
See Redundancy on page 137

3BSE035982-510

133

Design

Section 16  FOUNDATION Fieldbus HSE

(cid:129)

(cid:129)

Online configuration
Smaller configuration changes can be downloaded without disturbing the 
process. The Fieldbus Builder FF indicates if the download will interrupt the 
communication or not. 

Online upgrade
The Firmware/Software versions of all components can be upgraded online 
without disturbing the process.

Design

Introduction

FOUNDATION Fieldbus is flexible, supporting function block scheduling, which 
means that basic control and measurement features can be implemented similarly 
regardless of the device manufacturer.

Self-test and communication capabilities of microprocessor-based fieldbus devices 
reduce downtime and improve plant safety.

 

FOUNDATION Fieldbus (FF) is integrated into the controllers by the 
communication interface module for FOUNDATION Fieldbus HSE (CI860). In 
Control Builder, the CI860 is a hardware object created and configured in the 
project explorer.

The configuration of FF HSE Subnets is carried out with the Fieldbus Builder 
FOUNDATION Fieldbus (FBB FF). Thus configuration of CI860 requires both 
Fieldbus Builder FF and Control Builder M. 

134

3BSE035982-510

Section 16  FOUNDATION Fieldbus HSE

Design Example

Design Example

Figure 42 shows the architecture of a system including engineering and operator 
station workplaces, controllers with FOUNDATION Fieldbus HSE CI860 
communication interface units, linking devices, FF HSE devices, and H1 devices.

 

Figure 42. System 800xA topology with FF HSE

(cid:129) Multiple HSE Subnets may be connected to a system.

3BSE035982-510

135

Connection Methods

Section 16  FOUNDATION Fieldbus HSE

(cid:129)

(cid:129)

(cid:129)

(cid:129)

The FOUNDATION Fieldbus HSE CI860 communication interface units in 
the AC 800M Controller must be connected to a HSE Subnet.

The Linking Device LD 800HSE connects H1 links to an HSE Subnet.

FOUNDATION Fieldbus HSE Subnets should be physically separated from 
other networks as FOUNDATION Fieldbus HSE multicasts cause high load on 
the network.

OPC Server FF provides tool routing functionality.

Connection Methods

The publisher/subscriber method signifies scheduled traffic on the FF H1 bus using 
publisher/subscriber connections between FF devices and the CI860. This 
connection must be setup in the Fieldbus Builder FF. Fieldbus Builder FF is used to 
map publisher/subscriber communicated FF signals to CI860 I/O channels. Thereby 
access to FF function block inputs and outputs being connected to an FF signal in 
Fieldbus Builder FF and being published or subscribed is possible. 

A local connection between the controller and the CI860 must be setup using the 
Control Builder M. Therefore Control Builder M allows variables to be mapped to 
CI860 I/O channels. Dedicated control modules and function blocks allow for 
comfortable FF signal handling. 

 

The client/server method describes unscheduled data traffic on the FOUNDATION 
Fieldbus. The OPC server FOUNDATION Fieldbus uses client/server 
communication. This allows access to all FF function block parameters for 
operation and maintenance purposes. The HSE Host CI860 module also allows 
client/server communication enabling access (read and write) to FF block contained 
parameters from the IEC 61131 controller application.

The report distribution method is typically used by fieldbus devices to send alarm 
notifications to the operator workstations. 

For detailed information, refer to the Device Management FOUNDATION Fieldbus 
- Configuration (3BDD012902*) and Control and I/O - FOUNDATION Fieldbus 
HSE - Engineering and Configuration (3BDD012903*) manuals. 

136

3BSE035982-510

Section 16  FOUNDATION Fieldbus HSE

Redundancy

Redundancy

Redundancy is fully supported. This includes the communication interface module 
CI860, the Linking Device LD 800HSE, the OPC-Server FF and the HSE Subnet 
via redundant network components COTS.

Limitations and Performance

General

The CI860 communication interface unit cannot be used in an 
AC 800M High Integrity controller.

The following FF data types can be communicated:

Publisher:

 DS65
 DS66

(cid:129)

(cid:129)

 

Client/Server communication via CI860:







FFBitStrLen16DS14
FFBitStrLen8DS14
FFDiscreteSTatusDS66 
FFFloatDS8 
FFFloatStatusDS65

Dimensioning Limits, Linking Device

The linking device LD 800HSE supports up to 4 FF H1 links. For more information 
on linking device limitations, please refer to the manual FOUNDATION Fieldbus 
Linking Device LD 800HSE, User instruction (3BDD013086*).

3BSE035982-510

137

Dimensioning Limits, FOUNDATION Fieldbus HSE Communication Interface Module CI860 Section 

Dimensioning Limits, FOUNDATION Fieldbus HSE Communication Interface 
Module CI860

Cyclic communication via publisher/subscribe

The CI860 can handle a maximum of 1000 VCRs (Virtual Communication 
Relationships). Each VCR defines one I/O channel. Analog channels are mapped to 
the RealIO data type whereas discrete channels can be mapped to either the BoolIO 
or the DwordIO data type. The number of CI860 channels to which variables can be 
mapped is limited to the following numbers:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

1000 channels of type Real for analog inputs

500 channels of type Real for analog outputs

500 channels for discrete input in total of type Bool and Dword

250 channels for discrete output in total of type Bool and Dword

 

The CI860 Hardware Editor contains 3000 channels, but only 1000 channels can be 
used at the same time.

To ensure a proper functionality under all conditions the CPU load of the CI860 
shall not exceed 80% at a maximum. This gives the limit of the Average FF load of 
100% that can be operated by the CI860 during runtime. The Average FF load is 
calculated and monitored by Fieldbus Builder FF depending on the actual 
configuration. The Average FF load is given by the following formula:

Average FF load = 1.25 * (9% + T * 0.105% + N * 0.015%) 

T: Number of transfers/sec (publish and subscribe in total)

N: Number of configured channels on CI860

9%: Idle load

Examples for Average FF load = 100%:

N = 100 channels configured => T = 662 transfers/sec

N = 500 channels configured => T = 605 transfers/sec

N = 1000 channels configured=> T = 533 transfers/sec

138

3BSE035982-510

Section 16  FOUNDATION Fieldbus HSE

Hardware

Acyclic communication via client/server

In Control Builder, it is possible to access the contained FF function block 
parameters, acyclically. This is done via client/server communication through 
CI860.

The following limitations apply for this communication per CI860 module:

(cid:129) Maximum 30 Linking Devices

(cid:129) Maximum 150 H1 devices

(cid:129) Maximum 300 client/server signals

Hardware

The AC 800M controller needs to be connected to a CI860 CEX module to 
communicate with the Linking Device LD 800HSE on HSE Subnet.

 

HSE Subnets are based on the Ethernet standard. Therefore standard Ethernet 
components can be used to build an HSE Subnet. These components used in an HSE 
Subnet must be capable of handling multicasts as FOUNDATION Fieldbus uses 
multicast.

The Linking Device LD 800HSE connects the H1 links to an HSE Subnet. Since the 
Linking Device does not provide power to the H1 links, a power supply, a power 
conditioner and a bus termination is required for each H1 link.

Advanced

More information can be found in the manuals Device Management FOUNDATION 
Fieldbus - Configuration (3BDD012902*), FOUNDATION Fieldbus Linking 
Device LD 800HSE - User instruction (3BDD013086*) and Control and I/O 
FOUNDATION Fieldbus HSE - Engineering and Configuration (3BDD012903*). 
For information regarding wiring and installation of H1 please refer to the related 
documentation of the H1 devices and network components. Additional information 
can also be accessed from the Fieldbus Foundation web site 
http://www.fieldbus.org.

3BSE035982-510

139

Troubleshooting

Section 16  FOUNDATION Fieldbus HSE

Troubleshooting

Errors for CI860 are indicated in the hardware tree and system alarms/events are 
generated. The Fieldbus Builder FF can be used to monitor FF HSE and H1 devices 
as well as the H1 links. Alarms/events are also generated for H1 devices and the 
Linking Device if so configured. 

In case of a communication error, check the connections and terminations first. 

 

140

3BSE035982-510

Section 17  DriveBus

Introduction

The DriveBus protocol is used for communication between ABB Drives and the 
AC 800M controller, via the CI858 communication interface unit. The data 
exchange between the units is cyclic.

DriveBus communication is especially designed for sectional drive applications, for 
example ABB rolling mill drive systems and ABB paper machine control systems.

Supported media:

(cid:129)

(cid:129)

(cid:129)

 

DDCS (Distributed Drives Communication System) protocol,

Optical fibers for improved interference immunity and large network distances,

The CI858 communication interface unit is CE-marked, and meets the 
requirements specified in EMC Directive 89/336/EEC according to the 
standards EN 50081-2 and EN 61000-6-2.

Services Provided

(cid:129)

(cid:129)

(cid:129)

Dataset communication,

Cyclic output/input to/from drives,

Cyclic data to/from I/O units,

Advantages

(cid:129)

(cid:129)

(cid:129)

Supports many different types of drives and I/O units.

Time synchronization of drives to common calendar time.

Easy configurability of drives to be used with AC 800M.

3BSE035982-510

141

Design

Section 17  DriveBus

Identification method, self-checking and preventive systems to avoid incorrect 
configurations.

Communication diagnostics for the application.

No additional adapters required.

(cid:129)

(cid:129)

(cid:129)

Design

DriveBus has specific definition parameters, required for device configuration. 
Examples of such parameters are Configured application ID and Dataset x priority. 

The user connects all inputs and outputs to variables. DriveBus communication is 
automatically created when the application is downloaded to the controller.

Design Example

A DriveBus network typically consists of one or more drives, see Figure 43.

 

Branching

DDCS CI858

Units

MSTR

NDBU

CH0

MSTR

NDBU

(cid:129) (cid:129) (cid:129)

CH1 CH2 CH3

CH1 CH2 CH3

CH0

CH0

CH0

Drive

Drive

(cid:129) (cid:129) (cid:129)

Drive

CH0

CH0

CH0

(cid:129) (cid:129) (cid:129)
Drive

Drive

Drive

Figure 43. DriveBus system topology.

Up to 24 Drives

142

3BSE035982-510

Section 17  DriveBus

Dataset Communication

Dataset Communication

The data exchange between AC 800M, ABB Drives and I/O units, via CI858, 
consists of dataset pairs, which include input and output datasets, see Figure 44. 
One dataset (DS) consists of three 16-bit words, called data words (DW).

Datasets are read from ABB Drives. Therefore, datasets need to be defined by 
setting ABB Drive dataset parameters during the system configuration. See 
Configuration on page 144.

It is possible to specify that 1-4 (depending on the drive type) datasets have higher 
communication priority than the others. This is done by specifying the parameter 
Dataset x priority in the ABB Standard Drive or in the ABB Engineered Drive 
configuration editor in the Settings tab.

AC 800M/CI858
Application controller 
software

In_variable1
In_variable2
In_variable3

DS11
in channel 1
in channel 2
in channel 3

 

CH0

DriveBus

RMIO

Dataset table
DS Value
VAL 1
VAL 2
VAL 3

11

Out_variable1
Out_variable2
Out_variable3

DS10
out channel 1
out channel 2
out channel 3

DriveBus

CH0

Dataset table
DS Value
VAL 1
VAL 2
VAL 3

10

Figure 44. Dataset communication.

Address 
assignment of 
datasets
Group Index
92
92
92

01
02
03

Address 
assignment of 
datasets
Group Index
90
90
90

01
02
03

AMC 
table

AMC 
table
7.01
23.01
25.01

3BSE035982-510

143

Configuration

Configuration

Section 17  DriveBus

To activate communication between the AC 800M, CI858, ABB Drives and I/O 
units, the system must be configured with valid parameters:

(cid:129)

(cid:129)

Configure DriveBus communication using the Control Builder Professional 
engineering tool.

Define datasets by setting ABB Drive dataset parameters, for example 
parameter groups 90...93 for Engineered Drives. See ABB Drives Firmware 
documentation for dataset and other required parameter settings.

The Control Builder configuration includes the following steps:

1. Add units to the hardware tree,

2. Define parameters,

3. Connect variables,

completed.

 

4. Download the project to the controller when all the required steps have been 

DriveBus communication may be halted during download. Refer to the 
Control Builder Professional online help for further details.

Redundancy

Redundancy is not supported.

144

3BSE035982-510

Section 17  DriveBus

Limitations

Limitations

The CI858 communication unit cannot be used in an AC 800M High Integrity 
controller.

When a modified hardware configuration is downloaded to the controller, 
communication with hardware units may be interrupted:

If modified CI858 parameters are downloaded to the controller, DriveBus 
communication is interrupted, and the affected CI858 will reboot.

If modified drive parameters are downloaded to the controller, communication 
with the drive is interrupted, and a drive fault message, indicating 
communication loss, might be activated. If BusManager is not selected to 
monitor the connection, the fault can be avoided by adjusting the time delay of 
the drive communication loss supervision.

If modified I/O parameters are downloaded to the controller, communication 
with the I/O unit is interrupted.

If a drive or an I/O unit is added to or deleted from the hardware tree, and the 
changes are downloaded to the controller, the affected CI858 will reboot.

 

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

If the hardware tree positions of different types of drives or I/O's are changed, 
and the changes are downloaded to the controller, the affected CI858 will 
reboot. Switching the position of two similar units will not result in a reboot of 
the affected CI858. 

Changing the connected channels of a drive or an I/O causes recalculation of 
the connections.

Performance

For each drive connected to the CI858 communication interface unit, 8 dataset pairs 
can be defined. The number of datasets per drive can be extended using special 
applications.

DriveBus is able to transfer a maximum of 8 dataset pairs/ms. 

3BSE035982-510

145

Hardware

Hardware

Section 17  DriveBus

The maximum number of CI858 units connected to the AC 800M is two. The CI858 
unit has three channels. Every drive channel can be used for controlling up to 24 
drives. The following drives are supported:

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

ACS 800 / ACS 600 SingleDrive,

ACS 800 / ACS 600 MultiDrive,

ACS 800 / ACS 600 IGBT supply units,

ACS 600 thyristor supply units,

ACS 140 ... ACS 400,

DCS 600 and DCS 400,

ACS 6000 product family / large drives,

ACS 1000 product family,

Future drive types which are provided with DDCS interface,

Special drive applications which require more than eight dataset pairs (the 
number of datasets is user-defined).

 

The PC Tool channel can be used for downloading firmware to CI858 units. CI858 
firmware is downloaded with a special loading package, which does not involve 
Control Builder M.

CI858 connects to its units via three optical receiver/transmitter pairs. HP/Agilent 
Technologies Versatile Link Series (HFBR family) optical transmitter/receivers are 
used. The transmission speed of the fibre optic cables is 4 Mbit/s.

Advanced

For more information regarding DriveBus communication, see CI858 DriveBus 
Communication Interface, User's Manual (3AFE68237432*).

146

3BSE035982-510

Section 18  PROFIBUS DP

Introduction

PROFIBUS (PROcess FIeld BUS) is a fieldbus standard, especially designed for 
communication between systems and process objects. This protocol is open and 
vendor independent. With PROFIBUS, devices from different manufacturers can 
communicate without special interface adjustments. PROFIBUS can be used for 
both high speed, time critical transmission and extensive, complex communication 
tasks. PROFIBUS DP-V1 is implemented in AC 800M by using the CI854 module.

This manual only describes the CI854. Regarding legacy CI851 see older version 
of this manual.

 

Supported media:

(cid:129)

(cid:129)

(cid:129)

RS-485 transmission for universal applications in manufacturing automation

IEC 61158-2 transmission for use in process automation

Optical fibers for improved interference immunity and large network distances

The PROFIBUS DP (Decentralized Peripheral) fieldbus is based on European 
standard EN 50 170, and has been designed especially for communication between 
automation control systems and distributed peripherals at the device level.

PROFIBUS DP

The PROFIBUS DP communication profile is designed for efficient data exchange 
at the field bus level. The central automation devices, such as controllers, 
communicate through a fast serial connection with distributed field devices such as 
I/Os, drives, valves and measuring transducers. Data exchange with distributed 
devices is mainly cyclic.

3BSE035982-510

147

Services Provided

Section 18  PROFIBUS DP

PROFIBUS DP is suitable as a replacement for conventional, parallel signal 
transmission with 24V in manufacturing automation, as well as for analog signal 
transmission with 4-20mA or HART in process automation.

Services Provided

Advantages

(cid:129)

(cid:129)

(cid:129)

PROFIBUS DP-V0 and PROFIBUS DP-V1 are supported.

High information transfer rate up to 12 Mbit/s,

Supports many different types of I/O units,

(cid:129) Master redundancy,

(cid:129)

(cid:129)

(cid:129)

(cid:129) Multi-master,

Online changes,

Acyclic DP-V1 services (Tool Routing),

Online upgrade.

Line redundancy,

Slave redundancy,

PROFIBUS Diagnostics,

 

(cid:129)

(cid:129)

(cid:129)

Design

Introduction

A PROFIBUS (DP or PA) device has specific definition parameters, required for 
device configuration, stored in a GSD file (the GSD file format is given in European 
standard EN 50170). Examples of such parameters are the device version, the timing 
parameter of a device, the supported baudrate, the data format and the length of the 
I/O-data. For ABB devices - such as the S800 I/O, S900 I/O, and S200 I/O unit 
families - the device is already integrated in the Control Builders hardware library.

For a device from another manufacturer the configuration parameters are stored in a 
.GSD file delivered with the device. This file has to be imported with the 

148

3BSE035982-510

Section 18  PROFIBUS DP

Design Example

Device Import Wizard. During the download an automatic PROFIBUS master 
configuration is done. This calculation is performed for all controllers in the project 
and for all PROFIBUS masters connected to the respective controllers. Typically the 
user only has to configure the node addresses, not the timing parameters (which are 
necessary to configure only if the passive components are used as optical links). The 
PROFIBUS communication can be started when the PROFIBUS masters are 
configured, the node addresses for the master and the slave are set, and if necessary 
the default baudrate (1,5 Mbit/s) is changed. Please refer to the manual PROFIBUS 
DP, Engineering and Configuration (3BDS009030*) for more information.

The user connects all inputs and outputs to variables. The PROFIBUS 
communication is automatically created when the application is downloaded to the 
controller. PROFIBUS is primarily used for cyclic I/O communication. When 
communication is defined, the master will begin to cyclically ask the slaves for data 
and send data. The two outermost nodes must be terminated.

Design Example

Slave redundancy

A PROFIBUS DP network typically consists of one or more masters and many slave 
devices, see Figure 45. 

 

Master
redundancy

Redundancy
link module

Line redundancy

Slave redundancy

Figure 45. PROFIBUS DP network with I/O units.

3BSE035982-510

149

Redundancy

Section 18  PROFIBUS DP

Redundancy

Both line redundancy and slave redundancy are built in. Using two CI854A 
communication interface units adds master redundancy. For additional information 
and redundancy structures with optical links, please refer to the manual 
PROFIBUS DP, Wiring and Installation (3BDS009029*).

Limitations

CI854 can only act as master.

The network can have a maximum of 126 nodes. A maximum of 124 slaves can 
be connected to a CI854 since the node addresses 0 and 1 are reserved for 
CI854.

S800 I/O connected to CI840 and/or S900 I/O connected to CI920 supports 
cable redundancy together with slave redundancy.

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

 

If the PROFIBUS master unit, CI854, loses contact with a slave unit, for 
example due to a disconnected cable, input values are set according to ISP 
configuration. If the I/O unit does not support ISP, all input values will freeze.

Reset of PROFIBUS DP master, CI854, and the complete PROFIBUS is done 
if one of the following bus parameter settings are changed: Node address of 
CI854, baud rate or highest station address (HSA). A change of the other bus 
parameters does not affect the running communication.

If the CI854 is running with 12 Mbit/s, then in total 4000 bytes input and 
output data for the cyclic communication are allowed to be configured. For 
lower Baudrate than 12 Mbit/s there is no limitation

Online changes are supported by S900 (CI920) and S800 (CI840 and CI801), that 
is, modules can be added/changed without data being sent to ISP or OSP.

Performance

The cycle time on PROFIBUS depends on the baud rate, the summary of I/O data 
and the slave timing parameter. The fastest cycle time is about 1 ms with a baud rate 
of 12 Mbit/s and only one slave device. The typical cycle time is about 10-20 ms 
with 1,5 Mbit/s and some slave devices.

150

3BSE035982-510

Section 18  PROFIBUS DP

Hardware

CI854 slave devices can have node addresses in the range 2-125 (the node addresses 
0 and 1 are reserved for the CI854). The baud rate can be configured to be in the 
range of 9,6 kbit/s - 12 Mbit/s. There is a maximum length of I/O data at 4000 bytes 
of input and output data in total when using 12 Mbit/s. For slower baud rate, up to 
1,5 Mbit/s, there is no limitation of the length of the I/O data.

Hardware

The AC 800M controller needs to be connected to a CI854 CEX module to 
communicate with PROBUS DP devices. A shielded twisted pair cable with 
terminating resistors, or a fiber optic cable with optical link units is required.

The physical medium for PROFIBUS DP is RS-485, which allows 32 nodes in a 
segment and 126 nodes in a network. The maximum cable length may vary from 
100 to 1200 m depending on transmission speed. The Cable length can be extended 
using fiber optic modems (yielding a more robust network).

Segment couplers can be used to attach PROFIBUS PA devices.

For a product guide presenting all available hardware, visit the PROFIBUS web site: 
http://www.profibus.com

 

Advanced

More information concerning PROFIBUS DP can be found in the manuals 
PROFIBUS DP, Engineering and Configuration (3BDS009030*) and PROFIBUS 
DP, Wiring and Installation (3BDS009029*). Additional information can also be 
accessed from the PROBIBUS web site http://www.profibus.com.

Troubleshooting

The system software handling the PROFIBUS-DP communication in the controller 
writes diagnostic information to the controller log.

Errors are indicated in the hardware tree and system alarms/events are generated. 
There is also a log file (stored in the same place as the Control Builder log files) 
named "Profibus_DPV1_Calculation.txt" which is created by the automatic 
calculation of the PROFIBUS master parameters and can be useful for 

3BSE035982-510

151

CI854 Web Interface

Section 18  PROFIBUS DP

troubleshooting. In case of a communication error, check the connections and 
terminations first. Use the web server, described in the manual PROFIBUS DP, 
Engineering and Configuration (3BDS009030*), to get more information.

CI854 Web Interface

The CI854 Web Interface is needed in case of service activities. It is described in the 
manual PROFIBUS DP, Engineering and Configuration (3BDS009030*). It also 
describes how to change the node addresses for devices that do not have any 
switches like the PROFIBUS PA devices.

 

152

3BSE035982-510

Section 19  PROFINET IO

Introduction

PROFINET is an open Fieldbus standard for applications in manufacturing and 
process automation. PROFINET technology is an international standard that is part 
of IEC 61158 and IEC 61784.

The two perspectives of PROFINET are:

(cid:129)

(cid:129)

PROFINET IO, which is used to integrate simple distributed I/O and 
time-critical applications into Ethernet communication.

PROFINET CBA, which is used to integrate distributed automation system into 
Ethernet communication.

 

The PROFINET integration into ABB System 800xA focuses on the I/O 
connectivity. Therefore, only the PROFINET IO technology is used for the 
integration.

PROFINET IO is based on IEEE 802.3. It supports a transmission speed of 
100 Mbps with auto negotiation and auto crossover in a switched Ethernet network. 
PROFINET IO uses Ethernet as well as TCP, UDP, and IP as the basis for 
communications. It is designed to work with other IP-based protocols on the same 
network. 

Communication in PROFINET IO has different levels of performance:

(cid:129)

(cid:129)

The transmission of non time-critical parameters and configuration data occurs 
in the standard channel of PROFINET IO based on TCP/IP or UDP. 

The transmission of time-critical process data within the production facility, 
occurs in the Real Time (RT) channel, also described as soft real-time. 

3BSE035982-510

153

Services Provided

Section 19  PROFINET IO

For challenging tasks, the hardware based communication channel Isochronous 
Real-Time (IRT) is defined. For example, IRT can be used in motion control 
applications and high performance applications in factory automation.

The PROFINET IO implementation in System 800xA supports only RT channel. 
There is no support for IRT. 

When distributed I/O applications are connected for communication through 
PROFINET IO, the familiar I/O view of PROFIBUS is retained. The peripheral data 
from the field devices are periodically transmitted into the process model of the 
control system.

PROFINET IO describes a device model oriented to the PROFIBUS framework, 
which consists of places of insertion (slots) and groups of I/O channels (subslots). 
The technical characteristics of the field devices are described by the General 
Station Description (GSD) file, which is based on XML. The PROFINET IO 
engineering is performed in a way familiar to PROFIBUS. The distributed field 
devices are assigned to the controllers during configuration. 

The PROFINET IO is interfaced to the AC 800M controller (under System 800xA) 
using the PROFINET IO module CI871. 

 

Services Provided

The services provided by PROFINET IO integration into ABB System 800xA are:

(cid:129)

(cid:129)

PROFINET RT for I/O connectivity

Sequence of events with ABB SOE profile

Advantages

The advantages of PROFINET IO are:

(cid:129) Multi Controller Access.

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Transmission speed of 100 Mbps with auto negotiation and auto crossover in a 
switched Ethernet network.

Supports third party PROFINET IO devices.

Supports Application and Ethernet Network redundancy.

PROFINET Diagnostics.

154

3BSE035982-510

Section 19  PROFINET IO

Design

Sequence of Events.

Online changes. For more information on online changes, refer to AC 800M 
PROFINET IO Configuration (3BDS021515*) manual.

(cid:129)

(cid:129)

Design

Introduction

PROFINET IO describes a device model oriented to the PROFIBUS framework, 
which consists of places of insertion (slots) and groups of I/O channels (subslots).

PROFINET IO is configured using the Control Builder. The configuration includes 
the planning of the hardware units in the hardware tree, specific configuration for 
the PROFINET IO communication interface CI871 and the PROFINET IO devices. 
The device specific configuration data is described within the GSD file provided by 
the device manufacturer. To configure the PROFINET IO device within the Control 
Builder, the GSD file must be imported into a hardware library and inserted to the 
project using the Device Import Wizard.

 

3BSE035982-510

155

Design Examples

Section 19  PROFINET IO

Design Examples

Figure 46 shows an example of PROFINET IO installation with AC 800M 
controller.

 

Figure 46. PROFINET IO with AC 800M

Redundancy

PROFINET IO supports application redundancy and Ethernet network redundancy. 
System integrated redundancy is not supported in PNIO. For more information on 
Ethernet network redundancy, refer to AC 800M, PROFINET IO Configuration 
(3BDS021515*).

156

3BSE035982-510

Section 19  PROFINET IO

Online Upgrade

Online Upgrade

The CI871 supports Online Upgrade. The CI871 will be restarted during Online 
Upgrade. This will be done even if only the Controller firmware is upgraded. 
During restart, no internal status will be transferred and communications will be 
disconnected.

Technical Data

For PROFINET IO configurations in 800xA with CI871 the following 
dimensioning guidelines need to be taken into account: 

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

(cid:129)

Up to 12 CI871 per AC 800M controller.

Up to 126 PNIO devices per CI871.

Up to 512 modules per PNIO device.

 

One IOCR for each direction (Input and Output) per PNIO device,
each IOCR up to 1440 bytes of I/O data. 

Update times down to 1 ms (only if CI871 has one device configured). 

For CPU-load calculation of CI871 the Ethernet frames for inputs and outputs 
need to be calculated. CI871 can handle as a maximum one frame per ms in 
each direction. 
Example 1: Update times for all devices configured to 32 ms (default), then up 
to 32 devices can be connected to CI871. 
Example 2: Update times for all devices configured to 8 ms, then up to 8 
devices can be connected to CI871. 

The limitation for the CPU load of CI871 is checked by the system during 
download. If the system detects that there is an CPU overload, then it is indicated 
the Compilation Summary window and the download is blocked. CI871 may not 
function properly when there is an overload. User can check the CPU load before 
and after download by use of the Web Interface. The limit for the CPU load is 
100%. Up to that value the CI871 works stable without any problems or 
restrictions. 

3BSE035982-510

157

Hardware

Hardware

Section 19  PROFINET IO

The CI871 can be used to connect a AC 800M controller to PROFINET IO devices. 
The maximum number of CI871 that can be connected to a AC 800M controller is 
12 nonredundant units using the CEX-Bus.

Troubleshooting

The system software, which handles the PROFINET IO communication in the 
controller writes the diagnostic information to the controller log. Errors are 
indicated in the hardware tree and corresponding alarms or events are generated. 

During download, the Control Builder creates a log file 
PROFINET_Configuration.txt. This log file will have the result of the download 
compilation for the current and previous configurations. The log file can store data 
upto 10 MB and is stored in the LogFiles directory in Control Builder.

In case of a communication error, check the connections and terminations. For more 
information, refer to Web Interface described in the AC 800M, PROFINET IO, 
Configuration (3BDS021515*) manual.

 

If communication errors occur, then check for the consistency of the symbolic 
name of PNIO device. The name stored on the device should be identical with the 
station name configured in the Control Builder.

The network configuration should also be checked in case of communication 
error.

CI871 Web Interface

The CI871 Web Interface is used for commissioning and maintenance. It can also be 
used to configure symbolic name for PNIO devices. For more information on Web 
Interface, refer to the Web Interface section in AC 800M, PROFINET IO, 
Configuration (3BDS021515*) manual.

158

3BSE035982-510

Section 20  Modem Communication

Introduction

There are two types of modems: 

1.

Short distance modems for point-to-point private links (copper or fiber optic 
cable) and which can be used with twisted pair Ethernet, PPP, COMLI, 
Siemens 3964R, MODBUS RTU or PROFIBUS-DP.

2. Dial-up modems that use the public telephone system. COMLI is the only 

protocol that supports dial-up modems.

Short Distance Modem

 

There are two main reasons for using short distance modems:

1.

Permitted increase of the allowed maximum length of RS-232C and twisted 
pair Ethernet connections.

2. Elimination of the risk of electromagnetic interference and unauthorized 

intrusion by use of fiber optic modems.

There are a large number of modems on the market with different types of 
connectors that can convert within a range of networks. Recommended types are 
Westermo, and for fiber optic modems Hirschmann.

Fiber optic modems are available that support cable redundancy.

Communication via twisted pair Ethernet must be half duplex. In Hirschmann 
modems this must be selected by setting a hardware switch.

3BSE035982-510

159

Dial-Up Modem

Section 20  Modem Communication

Dial-Up Modem

In this section, the term modem refers to modems that are configured and 
controlled by a controller. It does not refer to modems that are transparent to the 
controller.

The COMLI master function can use a dial-up modem (Hayes modem). 
Recommended types are Westermo, for industrial applications, and US Robotics for 
office environments.

Two types of function block are associated with the COMLI modem function:

(cid:129) ModemDialUp

Initiates a Hayes dial-up operation

(cid:129) ModemHangUp

Initiates a Hayes hang-up operation

(cid:129) ModemConnStat

Initiates a Hayes connection operation

 

Connection diagrams for modem cables are provided in the hardware and operation 
guides of the different controllers.

The procedures initiate a Hayes modem operation. These procedures are 
asynchronous; i.e. only one dial or hang-up operation is permitted at a time.

Hardware and modem flow control is illustrated in Table 18 for their RTS (Request 
To Send), CTS (Clear To Send), DTR (Data Terminal Ready) and TR 
(TRansmission) signals respectively. For the modem flow control, there is also an 
illustration for the DCD (Data Carrier Detect) signal.

The DTR signal from the controller must be high, or the modem disconnects the 
communication. The DCD signal from the modem is high when the carrier wave is 
present. The RTS and CTS signals are used for hardware flow control. The RTS 
signal is high when the controller has data to send, and the CTS signal is high when 
the modem is ready to receive data.

The modem must be set for echo off, verbal result codes, and auto answer. 

160

3BSE035982-510

Section 20  Modem Communication

Dial-Up Modem

Table 18. Illustration of hardware and modem flow control.

Hardware flow control

Modem flow control

 

The Hayes init command in the parameter list has the default value ATE0V1S0=1, 
which means no echoing, verbal result codes, and auto answer. If the modem's 
default factory settings do not imply normal use of DTR and DCD, add the 
commands &D2 and &C1 to the init string. To use 9600 baud, add the command F8 
for the Westermo modem and &N6 for US Robotics. For other modem 
manufacturers, refer to the relevant manual.

The init command is sent only to the modem connected to the dialing controller. 
To apply the same settings to the modem at the other end, at least one dial-up 
must also be performed from that controller. Also note that US Robotics modems 
use only one type of parity and that you must adapt the communication settings 
accordingly.

As an alternative to using function blocks, the Automatic Connect parameter can be 
set to imply automatic connection to the default phone number when data is sent 
through the serial port. Another parameter is the Idle Time which sets the (idle) time 
connection. This means the time between last send data and until the modem is 
disconnected. 

3BSE035982-510

161

Limitations

Section 20  Modem Communication

Limitations

(cid:129)

(cid:129)

(cid:129)

Communication with short distance modems via twisted pair Ethernet must be 
half duplex.

COMLI is the only protocol that supports dial-up modems.

PPP via modem must use RS-232.

Performance

Refer to the relevant documentation from the modem manufacturer.

Troubleshooting

Refer to the relevant documentation from the modem manufacturer.

If you change the modem parameters, you may need to restart the modem before 
your changes will take place.

 

162

3BSE035982-510

Appendix A  OSI Profile for MMS

This appendix lists the available MMS services and describes the reduced OSI-
profile used.

MMS Services

Table 19. MMS services supported in version 5.1

of Control Software for AC 800M

Environment and general management

 

Initiate

Conclude

Abort

VMD management

GetNameList

GetCapabilityList

Domain management

InitiateDownloadSequence

DeleteDomain

Yes

Yes

No

Yes

Yes

Yes

Yes

3BSE035982-510

163

MMS Services

Appendix A  OSI Profile for MMS

Table 19. MMS services supported in version 5.1
of Control Software for AC 800M (Continued)

Variable access

Read

Write

InformationReport

GetVariableAccessAttributes

DefineNamedVariable

DeleteNamedVariable

GetNamedVariableListAttributes

DefineNamedVariableList

DeleteNamedVariableList

 

ServiceError

Journals

InitializeJournal

ReadJournal

File management

FileOpen

FileRead

FileDelete

FileClose

FileDirectory

Yes

Yes

No

No

No

No

No

No

No

Yes

No

No

Yes

Yes

Yes

Yes

No

164

3BSE035982-510

Appendix A  OSI Profile for MMS

Reduced OSI Implementation

Reduced OSI Implementation

Table 20. Reduced OSI implementation

OSI model 

layer

Application

Specification

Comments

ISO/IEC 9506: Manufacturing 
Message Specification (MMS)
ISO 8650: Protocol Specification for 
the Association Control Service 
Element

At application level only 
ISO/IEC 9506 is supported; 
i.e. ISO 8650 is not 
implemented

Presentation

ISO/IEC 8823: Connection Oriented 
Presentation Protocol Specification.

Not implemented, i.e. NULL 
layer

Not implemented, i.e. NULL 
layer

Fully implemented
Fully implemented

Fully implemented

Ethernet(3)

Session

Transport

Network

Data link

Physical

ISO/IEC 8327: Basic Connection 
Oriented Session Protocol 
Specification.

IETF RFC1006 (OSI over TCP)
IETF RFC 793 (TCP)

 

RFC 791(IPv4)
RNRP(1)

ISO/IEC 8802: Logical Link Control
ISO/IEC 8802-3: Carrier Sense 
Multiple Access with Collision 
Detection. 
CNCP(2)

ISO/IEC 8802-3: Carrier Sense 
Multiple Access with Collision 
Detection.

In addition to MMS, the ABB Redundant Network Routing Protocol operates as network layer.

(1)
(2) ABB time synchronization.
(3) PPP can also be used as data link with RS-232 as physical layer.

3BSE035982-510

165

Reduced OSI Implementation

Appendix A  OSI Profile for MMS

The services are connection-oriented. Connection-less or multicast services for 
MMS are not supported

 

166

3BSE035982-510

Appendix B  Used Port Numbers

Used Ports

Table 21 is a summary of used ports. Dynamically allocated ports is used by MMS 
Client (tcp).

Table 21. Used server port for each function

Function

IAC 

MMS

RNRP

SNTP

 

SattBus on TCP/IP

MODBUS TCP

Server Port

2757/UDP

102/tcp

2423/udp

123/udp

2999/udp

502/tcp

Show Remote System

147/udp

All unused ports are closed due to security reasons.

The built-in Windows firewall, by default, blocks port 147.

It means that this port must be opened in the firewall in order to use Control 
Builder's Show Remote System command.

3BSE035982-510

167

Used Ports

Appendix B  Used Port Numbers

 

168

3BSE035982-510

Appendix C  Configuration of HART Devices

Introduction

HART (Highway Addressable Remote Transducer) is an open system 
communication protocol that makes possible remote configuration and supervision 
of I/O devices with HART support. Scaling and calibration of I/O values is an 
implementation of Tool Routing and can be performed from workstations running 
OperateIT via the AC 800M controller and ModuleBus or PROFIBUS DP/V1. ABB 
provides units with HART support in the S800 I/O and S900 I/O families, though 
units from other vendors may also be used.

To get access to the HART devices via Tool Routing the Field IT products for 
PROFIBUS and HART have to be installed. The installation procedures are 
described in the 800xA System Installation manual.

 

Table 22. Units with HART support.

 AC 800M communication 

interface

 Fieldbus 

communication 

interface

CI854 for PROFIBUS DP-V1

CI840, CI801

I/O units

AI845, AO845, 
AI895, AO895 

CI920

AI930, AO930

AC 800M CPU

Modulebus

AI845, AO845, 
AI895, AO895, 

AI880A

3BSE035982-510

169

Configuration Example

Appendix C  Configuration of HART Devices

Configuration Example

An AC 800M has S800 I/O units locally connected directly via ModuleBus, S900 
I/O remotely connected via a CI854 PROFIBUS DP-V1 communication interface 
and a CI920 fieldbus communication interface. The workstation must be able to 
communicate directly with the controller.

CB

FBB PH

TRS

ModuleBus

 

CI854

AC 800M

Control Network

ModuleBus

S800 I/O

PROFIBUS 

DP-V1

CI920

CI840

S900 I/O

S800 I/O

Figure 47. Configuration example.

170

3BSE035982-510

Appendix C  Configuration of HART Devices

Toolrouting

The Fieldbus Builder PH (FBB PH), the Control Builder (CB) and the Tool Routing 
Service (TRS) must run on the same workstation. TRS communicates with the 
AC 800M controller via MMS. The only measure necessary is to enable the Tool 
Routing parameter belonging to the controller CPU in the project explorer.

DTMs (Device Type Managers) are device-specific software components, supplied 
by the field device manufacturer with the device. User interface device parameters, 
configuration data, etc., for a device, can be accessed through the DTM. It is the 
manufacturer's decision as to which services the DTM is to offer the user. Because 
DTMs typically are made by different vendors, data is supplied in XML format.

A device such as AC 800M, which supports gateway functionality, must have one 
DTM for each type of protocol: In our example one AC 800M ModuleBus DTM 
and one CI854 DTM for PROFIBUS. 

Toolrouting

 

In order to establish toolrouting when devices with gateway functionality are 
involved, these must have DTMs in the FAS, with a communication interface for 
each channel.

Figure 48 demonstrates data transfer from the device DTM to the AC 800M 
controller. The slave DTM can be a DTM for CI840/CI801 (S800 I/O) or for CI920 
(S900 I/O). I/O units AI895, AO895, AI 930 and AO 930 also require DTMs.

3BSE035982-510

171

Toolrouting

Appendix C  Configuration of HART Devices

CI854 
DTM

Slave
DTM

Unit 
DTM

Device
Device
DTM
DTM

Figure 48. Nested communication.

TRS

AC 800M

ModuleBus 

DTM

Unit 
DTM

Device
Device
DTM
DTM

 

172

3BSE035982-510

Appendix D  PROFIBUS PA

PROFIBUS PA

PROFIBUS PA (Process Automation) uses physical media according to
IEC 61158-2. This standard has a much slower transmission speed (31.25 kbit/s) in 
order to obtain a more quiet communication. It is used for process automation by 
means of function blocks, often in environments where there is a considerable risk 
of explosion.

A subset of PROFIBUS PA (cyclic services) can be controlled from Control 
Network if a segment coupler (such as a repeater or DP/PA coupler) is used as a 
gateway between PROFIBUS DP and PROFIBUS PA. 

Another way to link PROFIBUS DP and PROFIBUS PA is to use the Linking 
Device LD 800P, see Figure 49. The LD 800P Linking Device converts the physical 
bus characteristics of the RS 485 interface for PROFIBUS DP into PROFIBUS PA 
physical bus characteristics MBP according to IEC 61158-2. Please refer to the 
manuals PROFIBUS DP, Wiring and Installation (3BDS009029*) and PROFIBUS 
DP/PA Linking Device LD 800P, (3BDD011704*) for more information about the 
LD 800P.

 

3BSE035982-510

173

PROFIBUS PA

Appendix D  PROFIBUS PA

 

Figure 49. Linking PROFIBUS DP and PROFIBUS PA.

174

3BSE035982-510

Appendix E  ABB Drives

Introduction

ABB Standard Drives and ABB Engineered Drives can be connected to AC 800M 
in the following ways:

(cid:129) ModuleBus optical link (not electrical)

PROFIBUS DP-V1 via CI854-CI830, CI801 (configuration similar to 
ModuleBus, standard drive only)

PROFIBUS DP-V1 via NPBA-12 or RPBA-01

DriveBus via CI858 (configuration almost similar to ModuleBus)

For more information regarding ABB Standard Drives and ABB Engineered Drives, 
see vendor documentation. See also Section 17, DriveBus.

(cid:129)

(cid:129)

(cid:129)

 

3BSE035982-510

175

Types of ABB Drives

Appendix E  ABB Drives

Types of ABB Drives

The ABB Standard Drives and ABB Engineered Drives families comprise the 
following types of drives and the applications they are directed to. 

ABB Standard Drives 

Table 23.

Name 

Application

ACS400 

ACS600 

ACS600 

ACS600 

ACS800 

ACS800 

ACS800 

DCS400 

DCS500 

ABB Engineered Drives 

Standard drive

Crane application

Pump and fan application

Standard application

Crane application

 

Pump and fan application

Standard application

Standard drive

Standard drive

Table 24.

Name 

Application

ACS600 

ACS600 

IGBT supply (ISU) application

System application

ACS600AD 

Asynchronous drive

ACS600C 

Cyclo converter drive

ACS600SD 

Synchronous drive

176

3BSE035982-510

Appendix E  ABB Drives

Parameter Group Configuration

Table 24.  (Continued)

Name 

Application

ACS800 

ACS800 

ACS1000 

DCS600 

IGBT supply (ISU) application

System application

Standard drive

System application

Parameter Group Configuration

The ABB drives units are identified in the controller by their respective cluster and 
position address on the ModuleBus. 

To establish the communication between the ABB drives and AC 800M, at least the 
following parameter groups shall be considered to be reconfigured in the ABB drive 
systems. 

 

Table 25.

Parameter Group

Parameter Name

Setting

10.1

10.2

10.3

11.2

11.3

11.6

16.1

16.4

Ext1 Strt/Stp Dir

Ext2 Strt/Stp Dir

Direction

COMM. MODULE (CW)

COMM. MODULE (CW)

Request

Ext1/Ext2 Select

COMM. MODULE (CW)

EXT REF1 Select

EXT REF2 Select

RUN Enable

COMM. REF or FAST 
COMM

COMM. REF or FAST 
COMM

Yes or COMM. MODULE 
(CW)

Fault Reset Select

COMM. MODULE (CW)

3BSE035982-510

177

Parameter Group Configuration

Appendix E  ABB Drives

Table 25.  (Continued)

Parameter Group

Parameter Name

Setting

30.18

70.1

98.2

Example

COMM FLT Function

Fault

Channel 0 Addr

See Drives Addressing in 
the online help for Control 
Builder M

COMM. MODULE Link

Advant

The following parameter groups define the type of data you receive from the drive. 
This is only an example and you may find other configuration that suits your 
purpose.

Table 26.

Parameter Name

 

Main DS ACT1

Main DS ACT2

AUX DS ACT 3

AUX DS ACT 4

AUX DS ACT 5

Parameter Group

92.2

92.3

92.4

92.5

92.6

Setting

102 (Speed) Max value 
20000

105 (Torque) Max value 
10000

305 (Fault word 1)

308 (Alarm word 1)

306 (Fault word 2)

178

3BSE035982-510

A

ABB Drives 175

Configure communication 177
DriveBus 175
PROFIBUS DP 175

ABB Engineered Drives 176
ABB Standard Drives 176
AC 800M

Maximum bandwidth 44

Access modes 23
Adapters

CI840 150
CI920 150

Address space 37
Addressing

Explicit 36
Implicit 36

Advant Fieldbus 100 100
AF 100 99

Bus Master 104
Design 100
Message Transfer 104
Online upgrade 106
Process Data Transfer 103
Services 100

Alarms

INSUM 76
Application load
COMLI 67
MMS 43

Bandwidth

B

INDEX

AC 800M 44

C

Cable length

Siemens 3964R 81

Cables

SattBus 71

Channel

Drives 146
PC Tool 146

CI854

Web interface 152

Web Interface 158

CI871

Class C

 

IP address 37

Client/server 40
Client/server method

FF HSE 136

Clock synchronization 28

MB 300 61

CN1 42
CN2 42
CNCP 28
COMLI

Application load 67
Function blocks 67
Hardware 68
Limitations 66
Link to control system 68
Master 63
Message format 68
Message length 67

3BSE035982-510

179

Index
Index

Multidrop 64
Over SattBus 69
Performance 67
Point-to-point 65
Protocol 63
Redundancy 66
RS-232C 65, 68
SattBus messages 69
Services 63
Transmission distance 67
Transmission speed 67

Communication

Multidrop 63
Point-to-point 63

Communication Interface Module CI868

Design

IEC 61850 122

Communication interfaces

CI840 150
CI854 150
CI855 57
CI857 73
CI858 141
CI920 150

Communication Interruption

Online Upgrade 114

Communication profile

FF H1 133
FF HSE 133

Communication Variables 49
Configuration examples

HART 170

Configure

ABB Drive communication 177
CI854 152
CI871 158
DriveBus 144
HART devices 169

Connection Examples 109
Control Builder 33

 

Control Network 19, 31, 40

Troubleshooting 48

Controllers

Supported 22

CPU

Redundancy 41

D

Default gateway 46
Design 108

AF 100 100
DriveBus 142
Ethernet/IP and DeviceNet 118
FF HSE 134
IAC 51
IEC 61850 122
INSUM 74
MB 300 58
MMS 33
MODBUS RTU 86
PROFIBUS DP 148
PROFINET IO 155
SattBus 70
Siemens 3964R 80

Design Examples

IEC 61850 123

Design examples

DriveBus 142
FF HSE 135
INSUM 75
MB 300 58
MODBUS RTU 86
MODBUS TCP 91
PROFIBUS DP 149
PROFINET IO 156

DeviceNet 117
Direct addressing

SattBus 70

DriveBus

ABB Drives 175

180
180

3BSE035982-510
3BSE035982-510

Index

Configuration 144
Design 142
Design example 142
Hardware 146
Limitations 145
Performance 145
Protocol 141
Redundancy 144
Services 141

E

Editor

Parameters 33

EDS File 118
Ethernet 31

IEEE 803.2 standard 41
ports 42

Ethernet/IP and DeviceNet 117
Explicit addressing 36

F

FF H1

Communication profile 133

FF HSE

Client/server method 136
Communication profile 133
Connection methods 136
Design 134
Design example 135
Hardware 139
Limitations 137
Performance 137
Protocol 133
Publisher/subscriber method 136
Redundancy 137
Troubleshooting 140

Files

GSD 148

FOUNDATION Fieldbus HSE

Protocol 133

 

Function blocks
COMLI 67
INSUM 74
MB 300 58 to 59
MODBUS TCP 89
Modem 160
SattBus 70

GSD File 155
GSD file 148

Hardware 146

G

H

DriveBus 146
FF HSE 139
IEC 61850 128
INSUM 78
MB 300 61
MODBUS RTU 88
PROFIBUS DP 151
PROFINET IO 158
Siemens 3964R 81

HART 148

Configuration example 170
Protocol 169
Toolrouting 171

HART devices

Configure 169
Hayes modem 160
Hirschmann modem 159
Hubs 41

I

IAC 49

Communication Variables 49
Design 51
Limitations 54
Performance 53
Services Provided 50

3BSE035982-510

181

Index
Index

Troubleshooting 55

IEC 1158-2

PROFIBUS DP 147

IEC 61131-5 85
IEC 61158-2 173
IEC 61850 121
CI868 121
Design 122

Communication Interface Module 

CI868 122

Design Examples 123
Hardware 128
Limitations 125
Online Upgrade 125
Performance 127
Redundancy 124
Services Provided 121
Troubleshooting 128

IEEE 803.2 standard 41
Implicit addressing 36 to 37
INSUM

Alarms 76
CI857 73
Design 74
Design example 75
Function blocks 74
Hardware 78
Limitations 77
Performance 77
Protocol 73
Services 74
Troubleshooting 78

Integers

Siemens 3964R 82

IP 153
IP address 33

Class C 37
Remote 37

IP subnet mask 33
IRT 154

 

ISO 9506 31
Isochronous Real-Time 154

L

LD800 DN 117
Libraries

Serial Communication Library 129

Limitations

COMLI 66
DriveBus 145
FF HSE 137
IAC 54
IEC 61850 125
INSUM 77
MB 300 61
MODBUS RTU 88
MODBUS TCP 95, 157
Modem 162
PROFIBUS DP 150
Redundancy 45
SattBus 70
Siemens 3964R 81

Link

Control system to COMLI 68

M

Master

COMLI 63
MODBUS RTU 86
PROFIBUS DP 150

MasterBus 300 57
Maximum message size 23
Maximum number of variables

Per MMS telegram 44

MB 300

Clock synchronization 61
Design 58
Design example 58
Function blocks 58 to 59
Hardware 61

182
182

3BSE035982-510
3BSE035982-510

Limitations 61
Performance 61
Protocol 57
Redundancy 61
Services 57

MB 300 Clock Sync 28
Message format
COMLI 68
Message length
COMLI 67
MMS 43

MMS 31

 

Application load 43
Design 33
Maximum no of variables per telegram 44
Message length 43
OSI profile 163
Performance 43
Telegram size 44
Transmission speed 43
Troubleshooting 48

MMS Server 32
MMS Time Service 28
MOD5-to-MOD5 Communication Protocol 107
MODBUS RTU
Design 86
Design example 86
Hardware 88
Limitations 88
Master 86
Multi-drop 87
Performance 88
Point-to-point 86
Protocol 85
Redundancy 88
RS-232C 87
Services 85
Slave 86
Troubleshooting 88

MODBUS TCP

3BSE035982-510

Hardware 97
Limitations 95, 157
On line upgrade 95
Performance 96
Redundancy 97

Modem

Dial-up 160
Function blocks 160
Hayes 160
Limitations 162
Performance 162
Protocol 159
Short distance 159
Troubleshooting 162
US Robotics modem 160
Westermo 160

Module Redundancy 112
Multi-drop

MODBUS RTU 87

Multidrop 63

COMLI 64

Named SattBus 70
Network area 19, 34

N

O

Online Upgrade

IEC 61850 125
Online upgrade 114
OPC Server 32
OSI implementation 165
OSI profile 163

P

Parameters

Editor 33

Parity 161
PC Tool 146
Performance

Index

183

Index
Index

COMLI 67
DriveBus 145
FF HSE 137
IAC 53
IEC 61850 127
INSUM 77
MB 300 61
MMS 43
MODBUS RTU 88
Modem 162
PROFIBUS DP 150
SattBus 71
Siemens 3964R 81

Plant intranet 40
Point-to-point 63

COMLI 65
MODBUS RTU 86

PPP 36
PROFIBUS 154
PROFIBUS DP 147
ABB Drives 175
Design 148
Design example 149
Hardware 151
IEC 1158-2 147
Limitations 150
Master 150
Performance 150
Protocol 147
Redundancy 150
RS-485 147, 151
Services 148
Slave 150
PROFIBUS PA

Protocol 173

PROFIBUS-DP

Troubleshooting 151

PROFINET IO 153

Design 155
Design examples 156

 

Hardware 158
On line upgrade 157
Redundancy 156
Services 156
Troubleshooting 158

Project Explorer 33
Protocols

COMLI 63
DriveBus 141
FF HSE 133
FOUNDATION Fieldbus HSE 133
HART 169
INSUM 73
MB 300 57
MOD5-to-MOD5 107
MODBUS RTU 85
Modem 159
PPP 36
PROFIBUS DP 147
PROFIBUS PA 173
SattBus 69
Serial 129
Siemens 3964R 79
Supported 22

Publisher/subscriber method

FF HSE 136

R

Real-Time 154
Redundancy

COMLI 66
CPU 41
DriveBus 144
FF HSE 137
IEC 61850 124
Limitations 45
MB 300 61
MODBUS RTU 88
PROFIBUS DP 150
SattBus 70

184
184

3BSE035982-510
3BSE035982-510

Remote IP address 37
RNRP 19, 33, 41, 52
RNRP monitor 48
Routers 34, 41
RS-232C 31, 36

COMLI 65, 68
MODBUS RTU 87

RS-485

PROFIBUS DP 147, 151

RT 153

SattBus

S

Cables 71
Design 70
Direct addressing 70
Function blocks 70
Limitations 70
Named 70
Performance 71
Protocol 69
Redundancy 70
Services 69, 89, 100

SattCon 63
Serial protocol 129
Server 40
Services

COMLI 63
DriveBus 141
EtherNet/IP and DeviceNet 117
IAC 50
INSUM 74
MOD5-to-MOD5 107
MODBUS RTU 85
PROFIBUS DP 148
PROFINET IO 156
SattBus 69, 89, 100
Siemens 3964R 79

Services Provided

IEC 61850 121

3BSE035982-510

 

Setup Wizard 33
Siemens 3964R

Cable lengths 81
Design 80
Hardware 81
Integers 82
Limitations 81
Performance 81
Protocol 79
Services 79

SIMATIC 82
Slave

MODBUS RTU 86
PROFIBUS DP 150

SNTP 28
Subnetwork 34
Supported

Controllers 22
Protocols 22

Switches 41

T

TCP/IP 32, 153
Telegram size
MMS 44

Time synchronization 28
Toolrouting

HART 171
Transceiver 41
Transmission distance

COMLI 67

Transmission speed

COMLI 67
MMS 43

Troubleshooting 115

Control Network 48
FF HSE 140
IEC 61850 128
INSUM 78
MMS 48

Index

185

Index
Index

MODBUS RTU 88
Modem 162
PROFIBUS-DP 151
PROFINET IO 158

Twisted-pair cable
Shielded 151

U

UDP 71
UDP/IP 153
US Robotics 160
User Datagram Protocol 71

Variable types 23

V

W

Web interfaces
CI854 152
CI871 158

Westermo modem 159 to 160

 

186
186

3BSE035982-510
3BSE035982-510

Contact us

ABB AB 
Control Systems
Vasteras, Sweden
Phone: +46 (0) 21 32 50 00
Fax:
+46 (0) 21 13 78 45
E-Mail: processautomation@se.abb.com
www.abb.com/controlsystems

Copyright  2003-2010 by ABB.
All Rights Reserved

0
1
5
-
2
8
9
5
3
0
E
S
B
3

ABB Inc.
Control Systems
Wickliffe, Ohio, USA
Phone: +1 440 585 8500
+1 440 585 8756
Fax:
E-Mail:
industrialitsolutions@us.abb.com
www.abb.com/controlsystems

 

ABB Industry Pte Ltd
Control Systems
Singapore
Phone: +65 6776 5711
Fax:
+65 6778 0222
E-Mail: processautomation@sg.abb.com
www.abb.com/controlsystems

ABB Automation GmbH
Control Systems
Mannheim, Germany
Phone: +49 1805 26 67 76
Fax:
+49 1805 77 63 29
E-Mail: marketing.control-products@de.abb.com
www.abb.de/controlsystems

Power and productivity
for a better worldTM

